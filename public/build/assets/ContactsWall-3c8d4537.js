import{r as C,C as N,R as e,u as A,B as b,D as L,S as g,T as s,E as D,a as z,q as _,d as B,b as f,h as p,c as I,e as O,M as $,f as F,N as Y,A as H,g as k,i as T,j as S,P as U,k as R,l as P,m as j,n as q}from"./app-ad153593.js";const te=()=>{var m;const{contact:t}=C.useContext(N),[a,o]=e.useState("");e.useState("");const n=(m=t.wall)==null?void 0:m.filter(l=>l.type.includes(a)&&l.type!="contactUpdates"),{user:r,isLoading:i}=A(),c=[{title:"Showing: "},{title:e.createElement("a",{onClick:()=>{o("")}},"All")},{title:e.createElement("a",{onClick:()=>{o("deal")}},"Deals")},{title:e.createElement("a",{onClick:()=>{o("note")}},"Notes")},{title:e.createElement("a",{onClick:()=>{o("activity log")}},"Log")},{title:e.createElement("a",{onClick:()=>{o("text")}},"Texts")},{title:e.createElement("a",{onClick:()=>{o("files")}}," ","Files")}],u=l=>l.type==="note"?e.createElement(G,{data:l}):l.type==="text"?e.createElement(Q,{data:l,user:r}):l.type==="deal"?e.createElement(W,{data:l,user:r}):l.type==="dealUpdates"?e.createElement(X,{data:l,user:r}):l.type==="activity log"?e.createElement(J,{data:l,user:r}):l.type==="files"?e.createElement(V,{data:l,user:r}):l.type==="activities"?e.createElement(K,{data:l,user:r}):l.type==="call"?e.createElement(Z,{data:l,user:r}):e.createElement(e.Fragment,null);return e.createElement(e.Fragment,null,e.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"}},c.map(l=>e.createElement("div",null,l.title=="Showing: "?e.createElement("div",null,l.title):e.createElement(b,{type:"text",style:{padding:5},className:"wall-active-button"},l.title)))),e.createElement(L,null),e.createElement(g,{direction:"vertical",style:{width:"100%"},size:"large"},n!=null&&n.length?n.map((l,E)=>{const y=l.month+" "+l.year;if(E!==0){const h=t.wall[E-1],x=h.month+" "+h.year;return e.createElement("div",{key:E},y!==x&&e.createElement(s.Text,null,y),e.createElement("div",{style:{marginTop:10}},u(l)))}else return e.createElement("div",{key:E},e.createElement(s.Text,null,y),e.createElement("div",{style:{marginTop:10}},u(l)))}):e.createElement(D,{image:D.PRESENTED_IMAGE_SIMPLE})))},G=({data:t})=>{var x,M,w;const[a,o]=e.useState(!1),n=C.useRef(null),[r,i]=e.useState(0),[c,u]=e.useState(0),[m,l]=C.useState(!1);e.useEffect(()=>{var d,v;i(((d=n==null?void 0:n.current)==null?void 0:d.getBoundingClientRect().height)??0),u(((v=n==null?void 0:n.current)==null?void 0:v.scrollHeight)??0)},[(x=t.note)==null?void 0:x.notes,a]);const E=z(d=>{var v;return B((v=t.note)==null?void 0:v.id)},{onSuccess:()=>{_.invalidateQueries("getContact")},onError:d=>{console.log(d.message||"An error occurred")}}),y=()=>{var d;return e.createElement(g,{direction:"vertical",size:"middle",className:"w-100"},e.createElement(s.Text,null,e.createElement("div",{ref:n,dangerouslySetInnerHTML:{__html:((d=t.note)==null?void 0:d.notes)||""},style:{height:a||r<300?"auto":300,overflowY:a?"auto":"hidden",width:"100%"},className:"noteDiv"})),c>300&&e.createElement("span",{onClick:()=>o(!a),style:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",cursor:"pointer",fontSize:24}},a?e.createElement(P,null):e.createElement(j,null)))},h=[{key:"1",label:e.createElement("div",{onClick:()=>l(!0)},"Edit")},{key:"2",label:e.createElement(q,{title:"Delete",description:"Are you sure to delete this note?",onConfirm:()=>{var d;E.mutate((d=t.note)==null?void 0:d.id)},okText:"Yes",cancelText:"No"},"Delete")}];return e.createElement(e.Fragment,null,e.createElement(f,{title:e.createElement(s.Text,null,"Note Added - by"," ",((M=t.note)==null?void 0:M.user.firstName)+" "+((w=t.note)==null?void 0:w.user.lastName)),extra:e.createElement(g,{size:"small"},p.utc(t.date).local().format("MMM DD hh:mm A"),e.createElement(I,{menu:{items:h},className:"dashboard-actions",trigger:["click"]},e.createElement(b,{type:"link",style:{padding:0}},e.createElement(O,{style:{transform:"rotate(90deg)"}})))),style:{height:a||r<300?"auto":300,overflow:a?"visible":"hidden",backgroundColor:"#fef9c1",border:"3px dashed black"}},y()),m&&e.createElement($,{closable:!1,className:"your-modal",width:650,title:null,open:m,style:{maxHeight:"700px"},footer:null},e.createElement("div",{className:"modal-header m-b-md"},e.createElement(s.Title,{level:5,style:{color:"white"}},"Update note"),e.createElement(b,{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},onClick:()=>l(!1),icon:e.createElement(F,{style:{color:"white"}})})),e.createElement("div",{className:"modal-content"},e.createElement(Y,{note:t.note,handleCancel:()=>{l(!1)}}))))},Q=({data:t,user:a})=>{var o,n,r,i,c;return e.createElement(f,{title:e.createElement(s.Text,null,(o=t.text)!=null&&o.isFromApp?"Text Sent by "+t.text.sender:"Text Received from "+((n=t.text)==null?void 0:n.sender)),bordered:!1,extra:p.utc(t.date).local().format("MMM DD hh:mm A")},e.createElement(g,{direction:"vertical",size:"middle"},e.createElement(g,{size:"large"},e.createElement(s.Text,null,"To:"," ",(r=t.text)==null?void 0:r.to.replace(/^(\d{3})(\d{3})(\d{4})$/,"($1) $2-$3")),e.createElement(s.Text,null,"From:"," ",(i=t.text)==null?void 0:i.from.replace(/^(\d{3})(\d{3})(\d{4})$/,"($1) $2-$3"))),e.createElement(s.Text,null,(c=t.text)==null?void 0:c.message)))},W=({data:t,user:a})=>{var o,n,r,i;return e.createElement(f,{title:e.createElement(s.Text,null,a.id==((n=(o=t.deal)==null?void 0:o.creator)==null?void 0:n.id)?"Deal created - by You":"Deal created - by "+((i=(r=t.deal)==null?void 0:r.creator)==null?void 0:i.firstName)),bordered:!1,extra:p.utc(t.date).local().format("MMM DD hh:mm A")})},X=({data:t,user:a})=>{var o,n,r,i,c;return e.createElement(f,{title:e.createElement(s.Text,null,`${(o=t.update)==null?void 0:o.title} - by ${a.id==((n=t.update)==null?void 0:n.userId)?"You":(r=t.update)==null?void 0:r.by}`),bordered:!1,extra:p.utc(t.date).local().format("MMM DD hh:mm A"),style:{backgroundColor:"transparent",boxShadow:"none"}},((i=t.update)==null?void 0:i.from)??"blank"," ",e.createElement(H,null)," ",((c=t.update)==null?void 0:c.to)??"blank")},J=({data:t,user:a})=>{var o,n,r,i,c,u,m,l;return e.createElement(f,{title:e.createElement(s.Text,null,a.id==((n=(o=t.update)==null?void 0:o.owner)==null?void 0:n.id)?((r=t.update)==null?void 0:r.type)+"  - by You":((i=t.update)==null?void 0:i.type)+"  - by "+((u=(c=t.update)==null?void 0:c.owner)==null?void 0:u.firstName)),bordered:!1,extra:p.utc(t.date).local().format("MMM DD hh:mm A")},e.createElement(k,null,e.createElement(T,{md:14}," ",e.createElement("div",{style:{display:"flex",alignItems:"center",padding:20,paddingTop:0,paddingBottom:0,marginTop:10}},e.createElement("span",null,e.createElement(S,{style:{fontSize:14}})),e.createElement("span",{style:{fontSize:14,marginLeft:10}}," ",p((m=t.update)==null?void 0:m.start_date).format("LLL")))),e.createElement(T,{md:10}," ",e.createElement("div",{style:{display:"flex",alignItems:"center",padding:20,paddingTop:0,paddingBottom:0,marginTop:10}},e.createElement("span",null,"Outcome:"),e.createElement("span",{style:{fontSize:14,marginLeft:10}}," ",(l=t.update)==null?void 0:l.outcome)))))},K=({data:t,user:a})=>{var o,n,r,i,c,u,m,l;return console.log("data activities",t),e.createElement(f,{title:e.createElement(s.Text,null,a.id==((n=(o=t.activity)==null?void 0:o.owner)==null?void 0:n.id)?((r=t.activity)==null?void 0:r.type)+"  - by You":((i=t.activity)==null?void 0:i.type)+"  - by "+((u=(c=t.activity)==null?void 0:c.owner)==null?void 0:u.firstName)),bordered:!1,extra:p.utc(t.date).local().format("MMM DD hh:mm A")},e.createElement(k,null,e.createElement(T,{md:14}," ",e.createElement("div",{style:{display:"flex",alignItems:"center",padding:20,paddingTop:0,paddingBottom:0,marginTop:10}},e.createElement("span",null,e.createElement(S,{style:{fontSize:14}})),e.createElement("span",{style:{fontSize:14,marginLeft:10}}," ",p((m=t.activity)==null?void 0:m.start_date).format("LLL")))),e.createElement(T,{md:10}," ",e.createElement("div",{style:{display:"flex",alignItems:"center",padding:20,paddingTop:0,paddingBottom:0,marginTop:10}},e.createElement("span",null,"Outcome:"),e.createElement("span",{style:{fontSize:14,marginLeft:10}}," ",(l=t.activity)==null?void 0:l.availability)))))},V=({data:t,user:a})=>{var o,n,r,i,c,u,m;return console.log({data:t}),e.createElement(f,{title:e.createElement(s.Text,null,((o=t==null?void 0:t.file)==null?void 0:o.file_type)+" Added - by "+((r=(n=t.file)==null?void 0:n.uploaded_by)==null?void 0:r.firstName)),bordered:!1,extra:p.utc(t.date).local().format("MMM DD hh:mm A")},((i=t==null?void 0:t.file)==null?void 0:i.file_type)=="Call Recording"&&e.createElement("audio",{src:window.location.origin+"/"+((c=t==null?void 0:t.file)==null?void 0:c.file_url),controls:!0}),((u=t==null?void 0:t.file)==null?void 0:u.file_type)=="Image"&&e.createElement("div",{style:{position:"relative",overflow:"hidden"}},e.createElement("img",{src:window.location.origin+"/"+((m=t==null?void 0:t.file)==null?void 0:m.file_url),alt:"Your Image",style:{width:"100%",height:"auto",display:"block"}})))},Z=({data:t,user:a})=>{var r,i,c,u,m,l,E,y,h;const o=x=>x.charAt(0).toUpperCase()+x.slice(1);let n=(r=t.call)==null?void 0:r.url_recording;return n=n.split(","),n=n[0],n=n.replace("playAudio('",""),e.createElement(f,{title:e.createElement(s.Text,null,"Call"," ",(i=t.call)!=null&&i.isFromApp?`by ${(c=t.call)==null?void 0:c.contactNameFrom}`:`for ${(u=t.call)==null?void 0:u.contactNameTo}`),bordered:!1,extra:p.utc(t.date).local().format("MMM DD hh:mm A")},e.createElement(g,{direction:"vertical",size:"middle",style:{width:"100%"}},e.createElement(g,{size:"large"},e.createElement(s.Text,null,"From: ",(m=t.call)==null?void 0:m.from),e.createElement(s.Text,null,"To: ",(l=t.call)==null?void 0:l.to),e.createElement(b,{type:"link",style:{padding:0}},e.createElement(U,null)," Call back")),e.createElement(g,{size:"large"},e.createElement(s.Text,null,e.createElement(R,null)," ",(E=t.call)==null?void 0:E.duration),e.createElement(s.Text,null,"Outcome: ",o((y=t.call)==null?void 0:y.status))),(h=t.call)!=null&&h.url_recording?e.createElement("div",{style:{padding:10}},e.createElement("audio",{src:n,controls:!0})):null))};export{te as default};
