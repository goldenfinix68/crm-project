import{r as o,B as X,_ as Z,K as Y,L as k,bJ as xe,J as e,a5 as z,T as ie,a9 as be,M as v,N as h,I as $,ap as Se,bK as de,aP as ue,af as Ce,aN as Te,a8 as ee,$ as S,Z as K,Y as M,V,b0 as R,S as te,a1 as H,ae as Ie,O as ae,P as ne,aB as le,ah as Q,bt as O,bL as ke,aQ as we,bM as Le,bN as Me,A as se,U as Fe,aY as y,ab as Ne,bO as Ae,a6 as Oe,bP as ze,aV as G,aX as j,av as $e,bQ as De,aA as Be,a4 as Ye,bR as _e,bS as Re,a2 as Pe}from"./app-36fe48bb.js";import{C as Qe}from"./ContactInfo-b96ed242.js";import{T as J}from"./index-46242ecd.js";import{I as Ke}from"./InboxOutlined-6c79fe70.js";import{D as pe}from"./DeleteOutlined-cb3dd239.js";import{C as Ve}from"./ConfirmModal-7e86a89b.js";import{C as Ue}from"./ContactBulkUpdate-04e88f65.js";import"./DropdownComponent-28242137.js";import"./useContactMutation-2b8d3b2d.js";import"./ContactTypeTag-729b06ec.js";import"./TextEllipsis-f379ad5f.js";import"./ContactInfoEditableText-f630be63.js";import"./index-45f3e6dd.js";var We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};const Ge=We;var qe=function(a,n){return o.createElement(X,Z({},a,{ref:n,icon:Ge}))};const He=o.forwardRef(qe);var je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};const Je=je;var Xe=function(a,n){return o.createElement(X,Z({},a,{ref:n,icon:Je}))};const Ze=o.forwardRef(Xe);var et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM699 387c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64z"}}]},name:"tag",theme:"filled"};const tt=et;var at=function(a,n){return o.createElement(X,Z({},a,{ref:n,icon:tt}))};const ge=o.forwardRef(at),nt=({name:i,text:a})=>{const n=Y(xe,{onSuccess:s=>{k.invalidateQueries("thread")}});return a.isFromApp?e.createElement("div",{style:{padding:"10px",display:"flex",alignItems:"center",flexDirection:"row-reverse"}},e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"}},e.createElement("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#D6EAFF",padding:"12px 24px",borderRadius:"20px 20px 0 20px"}},a.status=="failed"?e.createElement(ie,{title:a==null?void 0:a.errorMessage},e.createElement(He,{style:{color:"red"}})):null,a.status=="scheduled"&&a.schedule?e.createElement(ie,{title:`Will be sent on ${z.utc(a.schedule).local().format("MMM DD, YYYY hh:mm A")}`},e.createElement(be,null)):null,e.createElement("div",{className:"p-l-xs"},a.message)),e.createElement(v,{style:{marginTop:"8px",fontSize:"10px"},size:1},`${z.utc(a.created_at).local().format("MMM DD, YYYY hh:mm A")} ${a.to.replace(/^(\d{3})(\d{3})(\d{4})$/,"($1) $2-$3")}`,a.status=="failed"&&e.createElement(h,{className:"p-0",type:"text",style:{color:"red",cursor:"pointer",fontSize:"10px"},onClick:()=>{n.mutate({data:{id:a.id},url:"/api/texts/resend"})},loading:n.isLoading},"Re-try"),a.status=="queued"&&e.createElement("div",null,"(Sending)")))):e.createElement("div",{style:{padding:"10px",display:"flex",alignItems:"center"}},e.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.createElement("div",{style:{backgroundColor:"white",padding:"12px 24px",borderRadius:"20px 20px 20px 0"}},a.message),e.createElement("div",{style:{marginTop:"8px",fontSize:"10px"}},`${a.from.replace(/^(\d{3})(\d{3})(\d{4})$/,"($1) $2-$3")} ${z.utc(a.created_at).local().format("MMM DD, YYYY hh:mm A")}`)))},lt=({isModalOpen:i,closeModal:a,handleSubmit:n,contactNumber:s})=>{const[m]=$.useForm(),[d,u]=o.useState(1),[c,g]=o.useState(void 0),[f,C]=o.useState(),[x,E]=o.useState(""),[t,N]=o.useState(!1),{data:w,refetch:_}=Se({keyword:x},"/api/contacts/global-search","globalSearch",()=>{N(!1)}),D=de.debounce(()=>{_()},300);o.useEffect(()=>{w&&w.data&&C(w.data.data)},[w]);const{data:r,isLoading:L,refetch:b}=ue("contact"),T=Y(Te,{onSuccess:()=>{F(),n&&n()},onError:p=>{Ce.error(p.message||"An error occurred")}}),F=()=>{a(),m.resetFields()};return console.log({contactFields:r}),e.createElement(ee,{title:e.createElement(S.Text,null,"Select Contact"),open:i,onCancel:F,className:"manage-column-field",footer:!1},d===1?e.createElement(e.Fragment,null,e.createElement(K,{gutter:12},e.createElement(M,{span:24},e.createElement(V,{placeholder:"Search Contact",className:"w-100",onChange:p=>{N(!0),E(p.target.value),D()}})),e.createElement(M,{span:24,className:"m-t-md"},e.createElement(R,{className:"field-list",size:"default",header:!1,footer:!1,bordered:!0},e.createElement(e.Fragment,null,t&&e.createElement("div",{style:{display:"grid",placeItems:"center",padding:"24px"}},e.createElement(te,null)),!t&&e.createElement(e.Fragment,null,f!=null&&f.length?f==null?void 0:f.map(p=>e.createElement("div",{className:"w-100",onClick:()=>{u(2),g(p)}},e.createElement(me,{text:`${p.fields.firstName} ${p.fields.lastName}`}))):e.createElement(H,{image:H.PRESENTED_IMAGE_SIMPLE}))))))):e.createElement(e.Fragment,null,e.createElement(v,{className:"m-b-sm"},e.createElement(S.Text,{strong:!0},`Phone type fields of ${c==null?void 0:c.fields.firstName} ${c==null?void 0:c.fields.lastName}`),e.createElement(h,{type:"link",className:"p-l-none",onClick:()=>u(1)},"Change")),e.createElement(R,{className:"field-list",size:"large",header:!1,footer:!1,bordered:!0,dataSource:r==null?void 0:r.filter(p=>["phone","mobile"].includes(p.type)),renderItem:p=>e.createElement(Ie,{title:"Update Contact",description:`Are you sure you want to replace this field with ${s}?`,onConfirm:async()=>{await T.mutate({customableId:c==null?void 0:c.id,customableType:"contact",fields:{[p.fieldName]:s}})}},e.createElement("div",{className:"w-100"},e.createElement(me,{text:p.label,subText:(c==null?void 0:c.fields[p.fieldName])??"Not set"})))})))},me=({text:i,subText:a})=>e.createElement(e.Fragment,null,e.createElement(R.Item,{style:{cursor:"pointer"}},e.createElement(v,{direction:"vertical",size:0},e.createElement(S.Text,{strong:!0},i),e.createElement(S.Text,null,a??"")))),Ee=()=>{const{data:i,isLoading:a}=ae("textLabels",async()=>{const n=localStorage.getItem("access_token");return(await ne.get("/api/text-labels",{headers:{Authorization:`Bearer ${n}`}})).data},{staleTime:1/0});return{labels:i,isLoading:a}},st=(i,a)=>{const{data:n,isLoading:s,refetch:m}=ae("textThreads",async()=>{const d=localStorage.getItem("access_token");return(await ne.get("/api/text-threads",{headers:{Authorization:`Bearer ${d}`},params:i})).data},{staleTime:1/0,onSuccess:()=>{a&&a()}});return{data:n,isLoading:s,refetch:m}},ot=(i,a,n)=>{const{data:s,isLoading:m,isError:d,refetch:u}=ae("thread",async()=>{try{const c=localStorage.getItem("access_token");return(await ne.get(`/api/text-threads/${i}?type=${a}`,{headers:{Authorization:`Bearer ${c}`}})).data}catch(c){throw new Error(`Error fetching text thread: ${c.message}`)}},{staleTime:1/0,onSuccess:c=>{n&&n(c)}});return{thread:s,isLoading:m,isError:d,refetch:u}},rt=({menu:i})=>{var L,b,T,F,p;const a=le(),[n,s]=o.useState(!1),[m,d]=e.useState(0),u=e.useRef(null),[c,g]=o.useState(!1),[f,C]=o.useState(!1),{threadId:x}=Q(),{contactId:E}=Q(),{thread:t,refetch:N,isLoading:w}=ot(E??x??"",E?"contact":"thread",I=>{s(!1)}),_=Y(Le,{onSuccess:()=>{}});o.useEffect(()=>{!x&&!E?a("/text-threads"):(s(!0),N())},[x,E]),e.useEffect(()=>{t&&(_.mutate({id:E??x,type:E?"contact":"thread"}),document.title=t.contactName+" - SpeedLead")},[t]);const D=()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},r=t==null?void 0:t.texts[(t==null?void 0:t.texts.length)-1];return e.useEffect(()=>(D(),d(m+1),console.log("thread",t),()=>{}),[t]),["all","inbox","scheduled"].includes(i)?e.createElement(e.Fragment,null,n?e.createElement("div",{style:{display:"grid",placeItems:"center",marginTop:"50%"}},e.createElement(te,null)):e.createElement(K,{key:x},e.createElement(M,{span:13,style:{height:"85vh",overflowY:"auto"},ref:u},e.createElement("div",{style:{backgroundColor:"white",width:"100%",padding:"15px",display:"flex",alignItems:"center",position:"sticky",top:0,zIndex:1}},e.createElement(v,{direction:"vertical",size:0},(L=t==null?void 0:t.contact)!=null&&L.id?e.createElement(O,{to:"/contacts/"+((b=t==null?void 0:t.contact)==null?void 0:b.id)+"/"+t.contact.fields.firstName.replace(/\s/g,"-")+"-"+t.contact.fields.lastName.replace(/\s/g,"-")},e.createElement(S.Text,{strong:!0},t==null?void 0:t.contactName)):e.createElement(S.Text,{strong:!0},t==null?void 0:t.contactName),e.createElement(S.Text,null,t==null?void 0:t.phoneNumbers))),e.createElement("div",{style:{paddingTop:"150px",height:"85%"}},e.createElement("div",{style:{minHeight:"80%"}},(T=t==null?void 0:t.texts)==null?void 0:T.sort((I,P)=>parseInt(I.id??"0")-parseInt(P.id??"0")).map(I=>e.createElement(nt,{name:t==null?void 0:t.contactName,text:I,key:I.id}))),e.createElement("div",{style:{position:"sticky",bottom:0,left:0,width:"100%",backgroundColor:"white",padding:"10px"},key:m},e.createElement(ke,{handleSubmit:()=>{k.invalidateQueries("thread")},phoneNumbers:t!=null&&t.contact?(F=t==null?void 0:t.contact)==null?void 0:F.phoneNumbers:[t==null?void 0:t.phoneNumbers],defaultTo:r!=null&&r.isFromApp?r==null?void 0:r.to:r==null?void 0:r.from,defaultFrom:((p=t==null?void 0:t.contact)==null?void 0:p.defaultMobileNumber)??(r!=null&&r.isFromApp?r==null?void 0:r.from:r==null?void 0:r.to),contact:(t==null?void 0:t.contact)??void 0})))),e.createElement(M,{span:11,style:{height:"85vh",overflowY:"auto"}},e.createElement(v,{direction:"vertical",size:0,style:{width:"100%",overflowY:"auto"}},e.createElement("div",{style:{backgroundColor:"#F5F5F5",width:"100%",padding:"15px",display:"flex",fontWeight:"bold",height:"74px",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"16px"}},"Related Information"),t!=null&&t.contact?e.createElement(Qe,{contact:t==null?void 0:t.contact}):e.createElement(v,{style:{textAlign:"center"},className:"w-100",size:"large",direction:"vertical"},"Number not saved in contacts",e.createElement(h,{onClick:()=>g(!0)},"Create Contact"),e.createElement(h,{onClick:()=>C(!0)},"Add to existing Contact")))),c&&e.createElement(we,{isModalOpen:c,closeModal:()=>{g(!1)},handleSubmit:()=>{k.invalidateQueries("textThreads"),k.invalidateQueries("thread")},type:"contact",record:{mobile:t==null?void 0:t.phoneNumbers}}),f&&e.createElement(lt,{isModalOpen:f,closeModal:()=>C(!1),handleSubmit:()=>{k.invalidateQueries("textThreads"),k.invalidateQueries("thread")},contactNumber:t==null?void 0:t.phoneNumbers}))):null},ct=({isModalOpen:i,closeModal:a,textLabel:n})=>{const[s]=$.useForm(),m=Y(Me,{onSuccess:()=>{k.invalidateQueries("textLabels"),a(),u()},onError:c=>{console.log(c.message||"An error occurred")}}),d=async c=>{await m.mutate({...c,id:n!=null&&n.id?n.id:""})},u=()=>{a(),s.resetFields()};return o.useEffect(()=>{n!=null&&n.name?s.setFieldValue("name",n.name):s.resetFields()},[n]),e.createElement(ee,{className:"modal-activity",open:i,onCancel:a,footer:null,title:null,closable:!1},e.createElement("div",{className:"modal-header"},e.createElement(S.Title,{level:5,style:{color:"white"}},n?"Update":"Create new"," label"),e.createElement(h,{onClick:a,style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},icon:e.createElement(se,{style:{color:"white"}})})),e.createElement(v,{direction:"vertical",style:{padding:"20px",width:"100%",paddingTop:"30px"},size:0},e.createElement($,{name:"basic",layout:"vertical",labelWrap:!0,onFinish:d,autoComplete:"off",form:s},e.createElement($.Item,{name:"name",label:"Label name",rules:[{required:!0,message:Fe}]},e.createElement(V,{placeholder:"Folder name"})),e.createElement(v,{style:{paddingTop:"5px"}},e.createElement(h,{type:"primary",htmlType:"submit",loading:m.isLoading},"Save"),e.createElement(h,{onClick:u},"Cancel")))))},it=({handleLabelChange:i})=>{var E;const a=le(),{labels:n,isLoading:s}=Ee(),[m,d]=e.useState(""),[u,c]=o.useState(!1),[g,f]=o.useState(!1),[C,x]=o.useState(void 0);return e.createElement(e.Fragment,null,e.createElement(y,{onClick:t=>{t.key!="labels"?t.key=="inbox"?a("/text-threads"):t.key=="templates"?a("/text-templates"):a("/texts/"+t.key):c(!u)},mode:"horizontal"},e.createElement(y.Item,{key:"inbox",icon:e.createElement(Ke,null)},e.createElement(O,{to:"/text-threads"},"Inbox")),e.createElement(y.Item,{key:"scheduled",icon:e.createElement(Ne,null)},e.createElement(O,{to:"/texts/scheduled"},"Scheduled")),e.createElement(y.Item,{key:"sent",icon:e.createElement(Ze,null)},e.createElement(O,{to:"/texts/sent"},"Sent")),e.createElement(y.Item,{key:"failed",icon:e.createElement(pe,null)},e.createElement(O,{to:"/texts/failed"},"Failed")),e.createElement(y.Item,{key:"templates",icon:e.createElement(Ae,null)},e.createElement(O,{to:"/text-templates"},"Templates")),e.createElement(y.Item,{key:"labels",icon:e.createElement(ge,{style:{transform:"rotate(45deg)"}})},e.createElement(e.Fragment,null,e.createElement(Oe,{overlay:e.createElement(y,{onClick:t=>{t.key!="new"?i(t):f(!g)}},e.createElement(y.Item,{key:"search"},e.createElement(V,{placeholder:"Search",onKeyUp:t=>d(t.target.value),onClick:t=>t.stopPropagation()})),e.createElement(y.Item,{key:"disabled",disabled:!0},e.createElement(S.Text,{strong:!0},"SELECT TEXT LABEL")),e.createElement(y.Item,{key:""},e.createElement(J,null,"No label")),(E=n==null?void 0:n.filter(t=>t.name.includes(m)))==null?void 0:E.map(t=>e.createElement(y.Item,{key:t.name},e.createElement(J,null,t.name))),e.createElement(y.Divider,null),e.createElement(y.Item,{key:"new"},e.createElement("a",{onClick:t=>{t.preventDefault()}},"Create New Label"))),trigger:["click"],open:u},e.createElement(S.Text,null,"Labels"))))),e.createElement(ct,{isModalOpen:g,closeModal:()=>f(!1),textLabel:C}))},mt=({isModalOpen:i,closeModal:a,threadIds:n,defaultChecked:s,isViaMultiple:m})=>{const[d]=$.useForm(),{labels:u,isLoading:c}=Ee(),[g,f]=o.useState("add"),C=Y(ze,{onSuccess:()=>{k.invalidateQueries("textThreads"),E()}}),x=async t=>{console.log(t),await C.mutate({...t,threadIds:n,action:m?g:""})},E=()=>{a(),d.resetFields()};return o.useEffect(()=>{s&&d.setFieldValue("labels",s)},[s]),e.createElement(ee,{className:"modal-activity",open:i,onCancel:a,footer:null,title:null,closable:!1,width:"300px"},e.createElement("div",{className:"modal-header"},e.createElement(S.Title,{level:5,style:{color:"white"}},"Assign Label"),e.createElement(h,{onClick:a,style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},icon:e.createElement(se,{style:{color:"white"}})})),e.createElement(v,{direction:"vertical",style:{padding:"20px",width:"100%",paddingTop:"30px"},size:0},e.createElement($,{name:"basic",layout:"vertical",labelWrap:!0,onFinish:x,autoComplete:"off",form:d},m&&e.createElement("center",null,e.createElement(G.Group,{value:g,onChange:t=>f(t.target.value)},e.createElement(G.Button,{value:"add"},"Add"),e.createElement(G.Button,{value:"remove"},"Remove"))),e.createElement($.Item,{name:"labels",labelCol:{span:24},wrapperCol:{span:24}},e.createElement(j.Group,{style:{display:"flex",flexDirection:"column",padding:"8px"}},u==null?void 0:u.map(t=>e.createElement(j,{key:t.id,value:t.id,style:{marginBottom:"8px"}},t.name)))),e.createElement(v,{style:{paddingTop:"5px"}},e.createElement(h,{type:"primary",htmlType:"submit",loading:C.isLoading},"Save"),e.createElement(h,{onClick:E},"Cancel")))))},dt=({label:i})=>{var oe,re;const[a,n]=o.useState(!0);o.useState("");const[s,m]=o.useState({page_size:20,page:1,searchKey:"",label:"",total:0}),{array:d,updateById:u,setInitialArray:c}=$e(),{data:g,refetch:f}=st(s,()=>{n(!1)}),C=l=>{m({...s,searchKey:l.target.value,page:1})},x=de.debounce(l=>{C(l)},300);le();const[E,t]=o.useState(!1),[N,w]=o.useState(!1),[_,D]=o.useState(!1),[r,L]=o.useState(void 0),[b,T]=o.useState([]),[F,p]=o.useState(!1),[I,P]=o.useState(!1),{data:B,isLoading:ut,refetch:pt}=ue("contact"),fe=Y(Re,{onSuccess:()=>{k.invalidateQueries("textThreads"),t(!1),D(!1),L(void 0),T([])},onError:l=>{console.log(l.message||"An error occurred")}}),ye=(l,U)=>{m({...s,page:l,page_size:U})};return o.useEffect(()=>{m({...s,label:i})},[i]),o.useEffect(()=>{n(!0),f()},[s.page,s.searchKey,s.page_size,s.label]),o.useEffect(()=>{g&&g.data&&(c(g.data),m({...s,total:g.total}))},[g]),e.createElement(e.Fragment,null,e.createElement(V,{suffix:e.createElement(De,null),placeholder:"Search",style:{marginBottom:"20px"},onChange:x}),b.length?e.createElement(v,{style:{width:"100%"},size:0},e.createElement(h,{icon:e.createElement(se,null),type:"text",onClick:()=>{T([])}}),e.createElement(S.Text,null,(b==null?void 0:b.length)+" Selected"),e.createElement(h,{icon:e.createElement(pe,null),type:"text",onClick:()=>{P(!0),t(!0)}},"Delete"),e.createElement(h,{onClick:()=>{P(!0),p(!0)},type:"text",icon:e.createElement(ge,{style:{transform:"rotate(45deg)"}})},"Labels"),(B==null?void 0:B.find(l=>l.type=="tag"))&&e.createElement(h,{icon:e.createElement(Be,null),type:"text",onClick:()=>{w(!0)}},"Tag")):e.createElement("div",{style:{height:"32px"}}),e.createElement(R,{itemLayout:"horizontal",style:{marginTop:0,height:"69vh",overflow:"auto"}},a?e.createElement("div",{style:{display:"grid",placeItems:"center",marginTop:"50%"}},e.createElement(te,null)):e.createElement(e.Fragment,null,d!=null&&d.length||a?d==null?void 0:d.map((l,U)=>{var ce;return e.createElement(e.Fragment,null,U===0&&e.createElement(Ye,{style:{margin:"5px"}}),e.createElement(R.Item,{style:{cursor:"pointer",padding:"3px 0",backgroundColor:l.haveDuplicatePhoneNumbers?"#ffc166":""}},e.createElement(O,{onClick:()=>{u(l.id,{...l,isLastTextSeen:!0})},to:`/text-threads/${l.isContactSaved?`contact/${l.contactId}`:l.id}`,style:{padding:0,color:"black",width:"100%"}},e.createElement(K,{gutter:12,style:{width:"100%"}},e.createElement(M,{span:6},e.createElement(q,{style:{fontWeight:l!=null&&l.isLastTextSeen?"":"bold",fontSize:"16px"}},e.createElement(v,{onClick:A=>A.stopPropagation()},e.createElement(j,{checked:b.includes(l.id),onClick:A=>{const he=A.target.checked;T(he?W=>[...W,l.id]:W=>W.filter(ve=>ve!==l.id))}}),e.createElement("div",{style:{cursor:"default"}},"   ")),` ${l.contactName}`)),e.createElement(M,{span:15},e.createElement(q,{style:{fontWeight:l!=null&&l.isLastTextSeen?"":"bold"}},e.createElement(v,{size:0},(ce=l.labels)==null?void 0:ce.map(A=>e.createElement(J,{style:{float:"right",fontWeight:"normal"}},A==null?void 0:A.name)),l==null?void 0:l.lastText))),e.createElement(M,{span:3},e.createElement(q,{style:{textAlign:"right"}},z.utc(l==null?void 0:l.created_at).local().isSame(z(),"day")?z.utc(l==null?void 0:l.created_at).local().format("hh:mm A"):z.utc(l==null?void 0:l.created_at).local().format("MMM DD")))))))}):e.createElement(H,{style:{marginTop:"50%"}}))),e.createElement("center",null,e.createElement(_e,{className:"p-t-sm",current:s.page,pageSize:s.page_size,total:s.total,onChange:ye,showSizeChanger:!1,size:"small"})),E&&e.createElement(Ve,{title:"Confirm",message:"Are you sure you want to archive this thread?",handleNo:()=>{t(!1),L(void 0)},handleYes:async()=>{D(!0),await fe.mutate(I?{threadIds:b}:{threadIds:[r.id]}),L(void 0)},isOpen:E,loading:_}),F&&e.createElement(mt,{isModalOpen:F,closeModal:()=>{p(!1),L(void 0),T([])},threadIds:I?b:[(r==null?void 0:r.id)??""],defaultChecked:I||(oe=r==null?void 0:r.labels)==null?void 0:oe.map(l=>l.id??""),isViaMultiple:I}),N&&e.createElement(Ue,{isModalOpen:N,closeModal:()=>w(!1),handleSubmit:()=>{k.invalidateQueries("textThreads"),w(!1),L(void 0),T([])},selectedRowKeys:b,type:"thread",defaultCustomFieldId:(re=B==null?void 0:B.find(l=>l.type=="tag"))==null?void 0:re.id}))},q=({children:i,style:a})=>{const s={...{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",alignItems:"center",justifyContent:"center"},...a};return e.createElement("div",{style:s},i)},wt=()=>{o.useEffect(()=>(document.title="Texts - SpeedLead",()=>{}),[]);const[i,a]=o.useState(""),{threadId:n}=Q(),{contactId:s}=Q(),m=n||s;return e.createElement(v,{direction:"vertical",style:{width:"100%"}},e.createElement(it,{handleLabelChange:d=>a(d.key)}),e.createElement(Pe,{bodyStyle:{padding:0}},e.createElement(K,{gutter:0,style:{height:"85vh"}},e.createElement(M,{span:m?11:24,style:{padding:"24px"}},e.createElement(dt,{label:i})),m&&e.createElement(M,{span:13,style:{backgroundColor:"#F5F5F5",margin:0,height:"85vh",overflowY:"auto"}},e.createElement(rt,{menu:"all"})))))};export{wt as default};
