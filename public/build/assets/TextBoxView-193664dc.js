import{r as s,B as X,_ as ee,K as Y,L as k,ab as Ce,J as e,a5 as z,T as de,a9 as be,M as h,N as f,I as $,aq as Te,bK as pe,aQ as ge,aa as Ie,aO as ke,a8 as te,$ as b,Z as V,Y as L,V as U,b1 as _,S as ae,a1 as j,ag as we,O as ne,P as le,aC as se,ai as K,bu as O,bL as Le,aR as Me,bM as Fe,bN as Ne,A as re,U as Ae,aZ as x,ad as Oe,bO as ze,a6 as $e,bP as De,aW as q,aY as Z,aw as Be,bQ as Re,aB as Ye,a4 as _e,bR as Pe,bS as Qe,a2 as Ke}from"./app-9c9e7353.js";import{C as Ve}from"./ContactInfo-359ec9a1.js";import{T as J}from"./index-f063f654.js";import{I as Ue}from"./InboxOutlined-c2b0235b.js";import{D as Ee}from"./DeleteOutlined-2e5c1a7b.js";import{C as We}from"./ConfirmModal-80b94226.js";import{C as Ge}from"./ContactBulkUpdate-bc99788c.js";import"./DropdownComponent-3f865cd9.js";import"./useContactMutation-d7a1df29.js";import"./ContactTypeTag-8f203314.js";import"./TextEllipsis-fa3ac5f0.js";import"./ContactInfoEditableText-1bfe26d1.js";import"./index-700a3c38.js";var qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};const He=qe;var je=function(a,l){return s.createElement(X,ee({},a,{ref:l,icon:He}))};const Ze=s.forwardRef(je);var Je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};const Xe=Je;var et=function(a,l){return s.createElement(X,ee({},a,{ref:l,icon:Xe}))};const tt=s.forwardRef(et);var at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM699 387c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64z"}}]},name:"tag",theme:"filled"};const nt=at;var lt=function(a,l){return s.createElement(X,ee({},a,{ref:l,icon:nt}))};const fe=s.forwardRef(lt),st=({name:c,text:a})=>{const l=Y(Ce,{onSuccess:r=>{k.invalidateQueries("thread")}});return a.isFromApp?e.createElement("div",{style:{padding:"10px",display:"flex",alignItems:"center",flexDirection:"row-reverse"}},e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"}},e.createElement("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#D6EAFF",padding:"12px 24px",borderRadius:"20px 20px 0 20px"}},a.status=="failed"?e.createElement(de,{title:a==null?void 0:a.errorMessage},e.createElement(Ze,{style:{color:"red"}})):null,a.status=="scheduled"&&a.schedule?e.createElement(de,{title:`Will be sent on ${z.utc(a.schedule).local().format("MMM DD, YYYY hh:mm A")}`},e.createElement(be,null)):null,e.createElement("div",{className:"p-l-xs"},a.message)),e.createElement(h,{style:{marginTop:"8px",fontSize:"10px"},size:1},`${z.utc(a.created_at).local().format("MMM DD, YYYY hh:mm A")} ${a.to.replace(/^(\d{3})(\d{3})(\d{4})$/,"($1) $2-$3")}`,a.status=="failed"&&e.createElement(f,{className:"p-0",type:"text",style:{color:"red",cursor:"pointer",fontSize:"10px"},onClick:()=>{l.mutate({data:{id:a.id},url:"/api/texts/resend"})},loading:l.isLoading},"Re-try"),a.status=="queued"&&e.createElement("div",null,"(Sending)")))):e.createElement("div",{style:{padding:"10px",display:"flex",alignItems:"center"}},e.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.createElement("div",{style:{backgroundColor:"white",padding:"12px 24px",borderRadius:"20px 20px 20px 0"}},a.message),e.createElement("div",{style:{marginTop:"8px",fontSize:"10px"}},`${a.from.replace(/^(\d{3})(\d{3})(\d{4})$/,"($1) $2-$3")} ${z.utc(a.created_at).local().format("MMM DD, YYYY hh:mm A")}`)))},rt=({isModalOpen:c,closeModal:a,handleSubmit:l,contactNumber:r})=>{const[d]=$.useForm(),[i,u]=s.useState(1),[o,S]=s.useState(void 0),[g,y]=s.useState(),[C,E]=s.useState(""),[t,F]=s.useState(!1),{data:w,refetch:D}=Te({keyword:C},"/api/contacts/global-search","globalSearch",()=>{F(!1)}),N=pe.debounce(()=>{D()},300);s.useEffect(()=>{w&&w.data&&y(w.data.data)},[w]);const{data:m,isLoading:B,refetch:T}=ge("contact"),I=Y(ke,{onSuccess:()=>{v(),l&&l()},onError:p=>{Ie.error(p.message||"An error occurred")}}),v=()=>{a(),d.resetFields()};return console.log({contactFields:m}),e.createElement(te,{title:e.createElement(b.Text,null,"Select Contact"),open:c,onCancel:v,className:"manage-column-field",footer:!1},i===1?e.createElement(e.Fragment,null,e.createElement(V,{gutter:12},e.createElement(L,{span:24},e.createElement(U,{placeholder:"Search Contact",className:"w-100",onChange:p=>{F(!0),E(p.target.value),N()}})),e.createElement(L,{span:24,className:"m-t-md"},e.createElement(_,{className:"field-list",size:"default",header:!1,footer:!1,bordered:!0},e.createElement(e.Fragment,null,t&&e.createElement("div",{style:{display:"grid",placeItems:"center",padding:"24px"}},e.createElement(ae,null)),!t&&e.createElement(e.Fragment,null,g!=null&&g.length?g==null?void 0:g.map(p=>e.createElement("div",{className:"w-100",onClick:()=>{u(2),S(p)}},e.createElement(ue,{text:`${p.fields.firstName} ${p.fields.lastName}`}))):e.createElement(j,{image:j.PRESENTED_IMAGE_SIMPLE}))))))):e.createElement(e.Fragment,null,e.createElement(h,{className:"m-b-sm"},e.createElement(b.Text,{strong:!0},`Phone type fields of ${o==null?void 0:o.fields.firstName} ${o==null?void 0:o.fields.lastName}`),e.createElement(f,{type:"link",className:"p-l-none",onClick:()=>u(1)},"Change")),e.createElement(_,{className:"field-list",size:"large",header:!1,footer:!1,bordered:!0,dataSource:m==null?void 0:m.filter(p=>["phone","mobile"].includes(p.type)),renderItem:p=>e.createElement(we,{title:"Update Contact",description:`Are you sure you want to replace this field with ${r}?`,onConfirm:async()=>{await I.mutate({customableId:o==null?void 0:o.id,customableType:"contact",fields:{[p.fieldName]:r}})}},e.createElement("div",{className:"w-100"},e.createElement(ue,{text:p.label,subText:(o==null?void 0:o.fields[p.fieldName])??"Not set"})))})))},ue=({text:c,subText:a})=>e.createElement(e.Fragment,null,e.createElement(_.Item,{style:{cursor:"pointer"}},e.createElement(h,{direction:"vertical",size:0},e.createElement(b.Text,{strong:!0},c),e.createElement(b.Text,null,a??"")))),ye=()=>{const{data:c,isLoading:a}=ne("textLabels",async()=>{const l=localStorage.getItem("access_token");return(await le.get("/api/text-labels",{headers:{Authorization:`Bearer ${l}`}})).data},{staleTime:1/0});return{labels:c,isLoading:a}},ot=(c,a)=>{const{data:l,isLoading:r,refetch:d}=ne("textThreads",async()=>{const i=localStorage.getItem("access_token");return(await le.get("/api/text-threads",{headers:{Authorization:`Bearer ${i}`},params:c})).data},{staleTime:1/0,onSuccess:()=>{a&&a()}});return{data:l,isLoading:r,refetch:d}},ct=(c,a,l)=>{const{data:r,isLoading:d,isError:i,refetch:u}=ne("thread",async()=>{try{const o=localStorage.getItem("access_token");return(await le.get(`/api/text-threads/${c}?type=${a}`,{headers:{Authorization:`Bearer ${o}`}})).data}catch(o){throw new Error(`Error fetching text thread: ${o.message}`)}},{staleTime:1/0,onSuccess:o=>{l&&l(o)}});return{thread:r,isLoading:d,isError:i,refetch:u}},it=({menu:c})=>{var B,T,I,v,p;const a=se(),[l,r]=s.useState(!1),[d,i]=e.useState(0),u=e.useRef(null),[o,S]=s.useState(!1),[g,y]=s.useState(!1),{threadId:C}=K(),{contactId:E}=K(),{thread:t,refetch:F,isLoading:w}=ct(E??C??"",E?"contact":"thread",M=>{r(!1)}),D=Y(Fe,{onSuccess:()=>{}});s.useEffect(()=>{!C&&!E?a("/text-threads"):(r(!0),F())},[C,E]),e.useEffect(()=>{t&&(D.mutate({id:E??C,type:E?"contact":"thread"}),document.title=t.contactName+" - SpeedLead")},[t]);const N=()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},m=t==null?void 0:t.texts[(t==null?void 0:t.texts.length)-1];return e.useEffect(()=>(N(),i(d+1),console.log("thread",t),()=>{}),[t]),["all","inbox","scheduled"].includes(c)?e.createElement(e.Fragment,null,l?e.createElement("div",{style:{display:"grid",placeItems:"center",marginTop:"50%"}},e.createElement(ae,null)):e.createElement(V,{key:C},e.createElement(L,{span:13,style:{height:"85vh",overflowY:"auto"},ref:u},e.createElement("div",{style:{backgroundColor:"white",width:"100%",padding:"15px",display:"flex",alignItems:"center",position:"sticky",top:0,zIndex:1}},e.createElement(h,{direction:"vertical",size:0},(B=t==null?void 0:t.contact)!=null&&B.id?e.createElement(O,{to:"/contacts/"+((T=t==null?void 0:t.contact)==null?void 0:T.id)+"/"+t.contact.fields.firstName.replace(/\s/g,"-")+"-"+t.contact.fields.lastName.replace(/\s/g,"-")},e.createElement(b.Text,{strong:!0},t==null?void 0:t.contactName)):e.createElement(b.Text,{strong:!0},t==null?void 0:t.contactName),e.createElement(b.Text,null,t==null?void 0:t.phoneNumbers))),e.createElement("div",{style:{paddingTop:"150px",height:"85%"}},e.createElement("div",{style:{minHeight:"80%"}},(I=t==null?void 0:t.texts)==null?void 0:I.sort((M,P)=>parseInt(M.id??"0")-parseInt(P.id??"0")).map(M=>e.createElement(st,{name:t==null?void 0:t.contactName,text:M,key:M.id}))),e.createElement("div",{style:{position:"sticky",bottom:0,left:0,width:"100%",backgroundColor:"white",padding:"10px"},key:d},e.createElement(Le,{handleSubmit:()=>{k.invalidateQueries("thread")},phoneNumbers:t!=null&&t.contact?(v=t==null?void 0:t.contact)==null?void 0:v.phoneNumbers:[t==null?void 0:t.phoneNumbers],defaultTo:m!=null&&m.isFromApp?m==null?void 0:m.to:m==null?void 0:m.from,defaultFrom:((p=t==null?void 0:t.contact)==null?void 0:p.defaultMobileNumber)??(m!=null&&m.isFromApp?m==null?void 0:m.from:m==null?void 0:m.to),contact:(t==null?void 0:t.contact)??void 0})))),e.createElement(L,{span:11,style:{height:"85vh",overflowY:"auto"}},e.createElement(h,{direction:"vertical",size:0,style:{width:"100%",overflowY:"auto"}},e.createElement("div",{style:{backgroundColor:"#F5F5F5",width:"100%",padding:"15px",display:"flex",fontWeight:"bold",height:"74px",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"16px"}},"Related Information"),t!=null&&t.contact?e.createElement(Ve,{contact:t==null?void 0:t.contact}):e.createElement(h,{style:{textAlign:"center"},className:"w-100",size:"large",direction:"vertical"},"Number not saved in contacts",e.createElement(f,{onClick:()=>S(!0)},"Create Contact"),e.createElement(f,{onClick:()=>y(!0)},"Add to existing Contact")))),o&&e.createElement(Me,{isModalOpen:o,closeModal:()=>{S(!1)},handleSubmit:()=>{k.invalidateQueries("textThreads"),k.invalidateQueries("thread")},type:"contact",record:{mobile:t==null?void 0:t.phoneNumbers}}),g&&e.createElement(rt,{isModalOpen:g,closeModal:()=>y(!1),handleSubmit:()=>{k.invalidateQueries("textThreads"),k.invalidateQueries("thread")},contactNumber:t==null?void 0:t.phoneNumbers}))):null},mt=({isModalOpen:c,closeModal:a,textLabel:l})=>{const[r]=$.useForm(),d=Y(Ne,{onSuccess:()=>{k.invalidateQueries("textLabels"),a(),u()},onError:o=>{console.log(o.message||"An error occurred")}}),i=async o=>{await d.mutate({...o,id:l!=null&&l.id?l.id:""})},u=()=>{a(),r.resetFields()};return s.useEffect(()=>{l!=null&&l.name?r.setFieldValue("name",l.name):r.resetFields()},[l]),e.createElement(te,{className:"modal-activity",open:c,onCancel:a,footer:null,title:null,closable:!1},e.createElement("div",{className:"modal-header"},e.createElement(b.Title,{level:5,style:{color:"white"}},l?"Update":"Create new"," label"),e.createElement(f,{onClick:a,style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},icon:e.createElement(re,{style:{color:"white"}})})),e.createElement(h,{direction:"vertical",style:{padding:"20px",width:"100%",paddingTop:"30px"},size:0},e.createElement($,{name:"basic",layout:"vertical",labelWrap:!0,onFinish:i,autoComplete:"off",form:r},e.createElement($.Item,{name:"name",label:"Label name",rules:[{required:!0,message:Ae}]},e.createElement(U,{placeholder:"Folder name"})),e.createElement(h,{style:{paddingTop:"5px"}},e.createElement(f,{type:"primary",htmlType:"submit",loading:d.isLoading},"Save"),e.createElement(f,{onClick:u},"Cancel")))))},dt=({handleLabelChange:c})=>{var E;const a=se(),{labels:l,isLoading:r}=ye(),[d,i]=e.useState(""),[u,o]=s.useState(!1),[S,g]=s.useState(!1),[y,C]=s.useState(void 0);return e.createElement(e.Fragment,null,e.createElement(x,{onClick:t=>{t.key!="labels"?t.key=="inbox"?a("/text-threads"):t.key=="templates"?a("/text-templates"):a("/texts/"+t.key):o(!u)},mode:"horizontal"},e.createElement(x.Item,{key:"inbox",icon:e.createElement(Ue,null)},e.createElement(O,{to:"/text-threads"},"Inbox")),e.createElement(x.Item,{key:"scheduled",icon:e.createElement(Oe,null)},e.createElement(O,{to:"/texts/scheduled"},"Scheduled")),e.createElement(x.Item,{key:"sent",icon:e.createElement(tt,null)},e.createElement(O,{to:"/texts/sent"},"Sent")),e.createElement(x.Item,{key:"failed",icon:e.createElement(Ee,null)},e.createElement(O,{to:"/texts/failed"},"Failed")),e.createElement(x.Item,{key:"templates",icon:e.createElement(ze,null)},e.createElement(O,{to:"/text-templates"},"Templates")),e.createElement(x.Item,{key:"labels",icon:e.createElement(fe,{style:{transform:"rotate(45deg)"}})},e.createElement(e.Fragment,null,e.createElement($e,{overlay:e.createElement(x,{onClick:t=>{t.key!="new"?c(t):g(!S)}},e.createElement(x.Item,{key:"search"},e.createElement(U,{placeholder:"Search",onKeyUp:t=>i(t.target.value),onClick:t=>t.stopPropagation()})),e.createElement(x.Item,{key:"disabled",disabled:!0},e.createElement(b.Text,{strong:!0},"SELECT TEXT LABEL")),e.createElement(x.Item,{key:""},e.createElement(J,null,"No label")),(E=l==null?void 0:l.filter(t=>t.name.includes(d)))==null?void 0:E.map(t=>e.createElement(x.Item,{key:t.name},e.createElement(J,null,t.name))),e.createElement(x.Divider,null),e.createElement(x.Item,{key:"new"},e.createElement("a",{onClick:t=>{t.preventDefault()}},"Create New Label"))),trigger:["click"],open:u},e.createElement(b.Text,null,"Labels"))))),e.createElement(mt,{isModalOpen:S,closeModal:()=>g(!1),textLabel:y}))},ut=({isModalOpen:c,closeModal:a,threadIds:l,defaultChecked:r,isViaMultiple:d})=>{const[i]=$.useForm(),{labels:u,isLoading:o}=ye(),[S,g]=s.useState("add"),y=Y(De,{onSuccess:()=>{k.invalidateQueries("textThreads"),E()}}),C=async t=>{console.log(t),await y.mutate({...t,threadIds:l,action:d?S:""})},E=()=>{a(),i.resetFields()};return s.useEffect(()=>{r&&i.setFieldValue("labels",r)},[r]),e.createElement(te,{className:"modal-activity",open:c,onCancel:a,footer:null,title:null,closable:!1,width:"300px"},e.createElement("div",{className:"modal-header"},e.createElement(b.Title,{level:5,style:{color:"white"}},"Assign Label"),e.createElement(f,{onClick:a,style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},icon:e.createElement(re,{style:{color:"white"}})})),e.createElement(h,{direction:"vertical",style:{padding:"20px",width:"100%",paddingTop:"30px"},size:0},e.createElement($,{name:"basic",layout:"vertical",labelWrap:!0,onFinish:C,autoComplete:"off",form:i},d&&e.createElement("center",null,e.createElement(q.Group,{value:S,onChange:t=>g(t.target.value)},e.createElement(q.Button,{value:"add"},"Add"),e.createElement(q.Button,{value:"remove"},"Remove"))),e.createElement($.Item,{name:"labels",labelCol:{span:24},wrapperCol:{span:24}},e.createElement(Z.Group,{style:{display:"flex",flexDirection:"column",padding:"8px"}},u==null?void 0:u.map(t=>e.createElement(Z,{key:t.id,value:t.id,style:{marginBottom:"8px"}},t.name)))),e.createElement(h,{style:{paddingTop:"5px"}},e.createElement(f,{type:"primary",htmlType:"submit",loading:y.isLoading},"Save"),e.createElement(f,{onClick:E},"Cancel")))))},pt=({label:c})=>{var ce,ie;const[a,l]=s.useState(!0);s.useState("");const[r,d]=s.useState({page_size:20,page:1,searchKey:"",label:"",total:0}),[i,u]=s.useState(localStorage.getItem("textStatus"));s.useEffect(()=>(i&&localStorage.setItem("textStatus",i),()=>{}),[i]);const{array:o,updateById:S,setInitialArray:g}=Be(),{data:y,refetch:C}=ot({...r,textStatus:i},()=>{l(!1)}),E=n=>{d({...r,searchKey:n.target.value,page:1})},t=pe.debounce(n=>{E(n)},500);se();const[F,w]=s.useState(!1),[D,N]=s.useState(!1),[m,B]=s.useState(!1),[T,I]=s.useState(void 0),[v,p]=s.useState([]),[M,P]=s.useState(!1),[Q,oe]=s.useState(!1),{data:R,isLoading:gt,refetch:Et}=ge("contact"),he=Y(Qe,{onSuccess:()=>{k.invalidateQueries("textThreads"),w(!1),B(!1),I(void 0),p([])},onError:n=>{console.log(n.message||"An error occurred")}}),ve=(n,W)=>{d({...r,page:n,page_size:W})};return s.useEffect(()=>{d({...r,label:c})},[c]),s.useEffect(()=>{l(!0),C()},[r.page,r.searchKey,r.page_size,r.label,i]),s.useEffect(()=>{y&&y.data&&(g(y.data),d({...r,total:y.total}))},[y]),e.createElement(e.Fragment,null,e.createElement(U,{suffix:e.createElement(Re,null),placeholder:"Search",style:{marginBottom:"20px"},onChange:t}),e.createElement(h,null,e.createElement(f,{onClick:n=>u("Current"),type:i=="Current"?"primary":"default"},"Current"),e.createElement(f,{onClick:n=>u("Archived"),type:i=="Archived"?"primary":"default"},"Archived")),v.length?e.createElement(h,{style:{width:"100%",marginTop:10}},e.createElement(f,{icon:e.createElement(re,null),type:"text",onClick:()=>{p([])}}),e.createElement(b.Text,null,(v==null?void 0:v.length)+" Selected"),i=="Current"?e.createElement(f,{icon:e.createElement(Ee,null),type:"text",onClick:()=>{oe(!0),w(!0)}},"Archive"):e.createElement(e.Fragment,null),e.createElement(f,{onClick:()=>{oe(!0),P(!0)},type:"text",icon:e.createElement(fe,{style:{transform:"rotate(45deg)"}})},"Labels"),(R==null?void 0:R.find(n=>n.type=="tag"))&&e.createElement(f,{icon:e.createElement(Ye,null),type:"text",onClick:()=>{N(!0)}},"Tag")):e.createElement("div",{style:{height:"42px"}}),e.createElement(_,{itemLayout:"horizontal",style:{marginTop:0,height:"69vh",overflow:"auto"}},a?e.createElement("div",{style:{display:"grid",placeItems:"center",marginTop:"50%"}},e.createElement(ae,null)):e.createElement(e.Fragment,null,o!=null&&o.length||a?o==null?void 0:o.map((n,W)=>{var me;return e.createElement(e.Fragment,null,W===0&&e.createElement(_e,{style:{margin:"5px"}}),e.createElement(_.Item,{style:{cursor:"pointer",padding:"3px 0",backgroundColor:n.haveDuplicatePhoneNumbers?"#ffc166":""}},e.createElement(O,{onClick:()=>{S(n.id,{...n,isLastTextSeen:!0})},to:`/text-threads/${n.isContactSaved?`contact/${n.contactId}`:n.id}`,style:{padding:0,color:"black",width:"100%"}},e.createElement(V,{gutter:12,style:{width:"100%"}},e.createElement(L,{span:6},e.createElement(H,{style:{fontWeight:n!=null&&n.isLastTextSeen?"":"bold",fontSize:"16px"}},e.createElement(h,{onClick:A=>A.stopPropagation()},e.createElement(Z,{checked:v.includes(n.id),onClick:A=>{const xe=A.target.checked;p(xe?G=>[...G,n.id]:G=>G.filter(Se=>Se!==n.id))}}),e.createElement("div",{style:{cursor:"default"}},"   ")),` ${n.contactName}`)),e.createElement(L,{span:15},e.createElement(H,{style:{fontWeight:n!=null&&n.isLastTextSeen?"":"bold"}},e.createElement(h,{size:0},(me=n.labels)==null?void 0:me.map(A=>e.createElement(J,{style:{float:"right",fontWeight:"normal"}},A==null?void 0:A.name)),n==null?void 0:n.lastText))),e.createElement(L,{span:3},e.createElement(H,{style:{textAlign:"right"}},z.utc(n==null?void 0:n.created_at).local().isSame(z(),"day")?z.utc(n==null?void 0:n.created_at).local().format("hh:mm A"):z.utc(n==null?void 0:n.created_at).local().format("MMM DD")))))))}):e.createElement(j,{style:{marginTop:"50%"}}))),e.createElement("center",null,e.createElement(Pe,{className:"p-t-sm",current:r.page,pageSize:r.page_size,total:r.total,onChange:ve,showSizeChanger:!1,size:"small"})),F&&e.createElement(We,{title:"Confirm",message:"Are you sure you want to archive this thread?",handleNo:()=>{w(!1),I(void 0)},handleYes:async()=>{B(!0),await he.mutate(Q?{threadIds:v}:{threadIds:[T.id]}),I(void 0)},isOpen:F,loading:m}),M&&e.createElement(ut,{isModalOpen:M,closeModal:()=>{P(!1),I(void 0),p([])},threadIds:Q?v:[(T==null?void 0:T.id)??""],defaultChecked:Q||(ce=T==null?void 0:T.labels)==null?void 0:ce.map(n=>n.id??""),isViaMultiple:Q}),D&&e.createElement(Ge,{isModalOpen:D,closeModal:()=>N(!1),handleSubmit:()=>{k.invalidateQueries("textThreads"),N(!1),I(void 0),p([])},selectedRowKeys:v,type:"thread",defaultCustomFieldId:(ie=R==null?void 0:R.find(n=>n.type=="tag"))==null?void 0:ie.id}))},H=({children:c,style:a})=>{const r={...{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",alignItems:"center",justifyContent:"center"},...a};return e.createElement("div",{style:r},c)},Mt=()=>{s.useEffect(()=>(document.title="Texts - SpeedLead",()=>{}),[]);const[c,a]=s.useState(""),{threadId:l}=K(),{contactId:r}=K(),d=l||r;return e.createElement(h,{direction:"vertical",style:{width:"100%"}},e.createElement(dt,{handleLabelChange:i=>a(i.key)}),e.createElement(Ke,{bodyStyle:{padding:0}},e.createElement(V,{gutter:0,style:{height:"85vh"}},e.createElement(L,{span:d?11:24,style:{padding:"24px"}},e.createElement(pt,{label:c})),d&&e.createElement(L,{span:13,style:{backgroundColor:"#F5F5F5",margin:0,height:"85vh",overflowY:"auto"}},e.createElement(it,{menu:"all"})))))};export{Mt as default};
