import{J as t,r as s,bT as X,t as se,c as j,g as re,m as ie,b as ce,p as me,C as de,y as ue,u as pe,B as P,_ as B,a_ as Y,aU as ge,ak as Z,T as fe,N as z,I as v,a3 as be,K as F,L as b,a8 as he,$ as N,A as ye,M as h,U as _,W,bt as Ee,ar as Ce,bU as ve,br as xe,aC as Se,bV as $e,bW as Me,a2 as we,Z as Oe,Y as U,a6 as Te,aZ as T,V as J,bX as Ne,bu as ze,bY as Ae,aR as Fe,aO as Ie,aa as Le,ag as q,z as je}from"./app-9c9e7353.js";import{D as Pe}from"./DropdownComponent-3f865cd9.js";import{a as ee,d as Be,c as De,b as He}from"./useContactMutation-d7a1df29.js";import{C as Re}from"./ContactTypeTag-8f203314.js";import{T as ke}from"./TextEllipsis-fa3ac5f0.js";import{C as Ve}from"./ContactInfoEditableText-1bfe26d1.js";import{T as G}from"./index-f063f654.js";import{B as _e}from"./index-700a3c38.js";const Qe={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},We=Qe,Ue=t.createContext({}),te=Ue;var qe=globalThis&&globalThis.__rest||function(e,l){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)l.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]]);return o};const Ge=e=>se(e).map(l=>Object.assign(Object.assign({},l==null?void 0:l.props),{key:l.key}));function Ke(e,l,o){const a=s.useMemo(()=>l||Ge(o),[l,o]);return s.useMemo(()=>a.map(c=>{var{span:r}=c,u=qe(c,["span"]);return Object.assign(Object.assign({},u),{span:typeof r=="number"?r:X(e,r)})}),[a,e])}function K(e,l,o){let a=e,n=!1;return(o===void 0||o>l)&&(a=Object.assign(Object.assign({},e),{span:l}),n=o!==void 0),[a,n]}function Xe(e,l){const o=[];let a=[],n=l,c=!1;return e.filter(r=>r).forEach((r,u)=>{const f=r==null?void 0:r.span,m=f||1;if(u===e.length-1){const[d,p]=K(r,n,f);c=c||p,a.push(d),o.push(a);return}if(m<n)n-=m,a.push(r);else{const[d,p]=K(r,n,m);c=c||p,a.push(d),o.push(a),n=l,a=[]}}),[o,c]}const Ye=(e,l)=>{const[o,a]=s.useMemo(()=>Xe(l,e),[l,e]);return o},Ze=Ye,Je=e=>{let{children:l}=e;return l},et=Je;function H(e){return e!=null}const tt=e=>{const{itemPrefixCls:l,component:o,span:a,className:n,style:c,labelStyle:r,contentStyle:u,bordered:f,label:m,content:d,colon:p}=e,y=o;return f?s.createElement(y,{className:j({[`${l}-item-label`]:H(m),[`${l}-item-content`]:H(d)},n),style:c,colSpan:a},H(m)&&s.createElement("span",{style:r},m),H(d)&&s.createElement("span",{style:u},d)):s.createElement(y,{className:j(`${l}-item`,n),style:c,colSpan:a},s.createElement("div",{className:`${l}-item-container`},(m||m===0)&&s.createElement("span",{className:j(`${l}-item-label`,{[`${l}-item-no-colon`]:!p}),style:r},m),(d||d===0)&&s.createElement("span",{className:j(`${l}-item-content`),style:u},d)))},k=tt;function V(e,l,o){let{colon:a,prefixCls:n,bordered:c}=l,{component:r,type:u,showLabel:f,showContent:m,labelStyle:d,contentStyle:p}=o;return e.map((y,C)=>{let{label:A,children:S,prefixCls:M=n,className:w,style:O,labelStyle:E,contentStyle:g,span:x=1,key:$}=y;return typeof r=="string"?s.createElement(k,{key:`${u}-${$||C}`,className:w,style:O,labelStyle:Object.assign(Object.assign({},d),E),contentStyle:Object.assign(Object.assign({},p),g),span:x,colon:a,component:r,itemPrefixCls:M,bordered:c,label:f?A:null,content:m?S:null}):[s.createElement(k,{key:`label-${$||C}`,className:w,style:Object.assign(Object.assign(Object.assign({},d),O),E),span:1,colon:a,component:r[0],itemPrefixCls:M,bordered:c,label:A}),s.createElement(k,{key:`content-${$||C}`,className:w,style:Object.assign(Object.assign(Object.assign({},p),O),g),span:x*2-1,component:r[1],itemPrefixCls:M,bordered:c,content:S})]})}const lt=e=>{const l=s.useContext(te),{prefixCls:o,vertical:a,row:n,index:c,bordered:r}=e;return a?s.createElement(s.Fragment,null,s.createElement("tr",{key:`label-${c}`,className:`${o}-row`},V(n,e,Object.assign({component:"th",type:"label",showLabel:!0},l))),s.createElement("tr",{key:`content-${c}`,className:`${o}-row`},V(n,e,Object.assign({component:"td",type:"content",showContent:!0},l)))):s.createElement("tr",{key:c,className:`${o}-row`},V(n,e,Object.assign({component:r?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},l)))},at=lt,nt=e=>{const{componentCls:l,labelBg:o}=e;return{[`&${l}-bordered`]:{[`> ${l}-view`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"},[`${l}-row`]:{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBottom:"none"},[`> ${l}-item-label, > ${l}-item-content`]:{padding:`${e.padding}px ${e.paddingLG}px`,borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${l}-item-label`]:{color:e.colorTextSecondary,backgroundColor:o,"&::after":{display:"none"}}}},[`&${l}-middle`]:{[`${l}-row`]:{[`> ${l}-item-label, > ${l}-item-content`]:{padding:`${e.paddingSM}px ${e.paddingLG}px`}}},[`&${l}-small`]:{[`${l}-row`]:{[`> ${l}-item-label, > ${l}-item-content`]:{padding:`${e.paddingXS}px ${e.padding}px`}}}}}},ot=e=>{const{componentCls:l,extraColor:o,itemPaddingBottom:a,colonMarginRight:n,colonMarginLeft:c,titleMarginBottom:r}=e;return{[l]:Object.assign(Object.assign(Object.assign({},ce(e)),nt(e)),{"&-rtl":{direction:"rtl"},[`${l}-header`]:{display:"flex",alignItems:"center",marginBottom:r},[`${l}-title`]:Object.assign(Object.assign({},me),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${l}-extra`]:{marginInlineStart:"auto",color:o,fontSize:e.fontSize},[`${l}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${l}-row`]:{"> th, > td":{paddingBottom:a},"&:last-child":{borderBottom:"none"}},[`${l}-item-label`]:{color:e.colorTextTertiary,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${c}px ${n}px`},[`&${l}-item-no-colon::after`]:{content:'""'}},[`${l}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${l}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${l}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${l}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${l}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${l}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${l}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},st=re("Descriptions",e=>{const l=ie(e,{});return[ot(l)]},e=>({labelBg:e.colorFillAlter,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText}));var rt=globalThis&&globalThis.__rest||function(e,l){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)l.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]]);return o};const le=e=>{const{prefixCls:l,title:o,extra:a,column:n,colon:c=!0,bordered:r,layout:u,children:f,className:m,rootClassName:d,style:p,size:y,labelStyle:C,contentStyle:A,items:S}=e,M=rt(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","items"]),{getPrefixCls:w,direction:O,descriptions:E}=s.useContext(de),g=w("descriptions",l),x=ue(),$=s.useMemo(()=>{var I;return typeof n=="number"?n:(I=X(x,Object.assign(Object.assign({},We),n)))!==null&&I!==void 0?I:3},[x,n]),D=Ke(x,S,f),i=pe(y),R=Ze($,D),[ae,ne]=st(g),oe=s.useMemo(()=>({labelStyle:C,contentStyle:A}),[C,A]);return ae(s.createElement(te.Provider,{value:oe},s.createElement("div",Object.assign({className:j(g,E==null?void 0:E.className,{[`${g}-${i}`]:i&&i!=="default",[`${g}-bordered`]:!!r,[`${g}-rtl`]:O==="rtl"},m,d,ne),style:Object.assign(Object.assign({},E==null?void 0:E.style),p)},M),(o||a)&&s.createElement("div",{className:`${g}-header`},o&&s.createElement("div",{className:`${g}-title`},o),a&&s.createElement("div",{className:`${g}-extra`},a)),s.createElement("div",{className:`${g}-view`},s.createElement("table",null,s.createElement("tbody",null,R.map((I,Q)=>s.createElement(at,{key:Q,index:Q,colon:c,prefixCls:g,vertical:u==="vertical",bordered:r,row:I}))))))))};le.Item=et;const it=le;var ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"};const mt=ct;var dt=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:mt}))};const ut=s.forwardRef(dt);var pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};const gt=pt;var ft=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:gt}))};const bt=s.forwardRef(ft);var ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-80.8 108.9L531.7 514.4c-7.8 6.1-18.7 6.1-26.5 0L189.6 268.9A7.2 7.2 0 01194 256h648.8a7.2 7.2 0 014.4 12.9z"}}]},name:"mail",theme:"filled"};const yt=ht;var Et=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:yt}))};const Ct=s.forwardRef(Et);var vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.3 338.4a447.57 447.57 0 00-96.1-143.3 443.09 443.09 0 00-143-96.3A443.91 443.91 0 00512 64h-2c-60.5.3-119 12.3-174.1 35.9a444.08 444.08 0 00-141.7 96.5 445 445 0 00-95 142.8A449.89 449.89 0 0065 514.1c.3 69.4 16.9 138.3 47.9 199.9v152c0 25.4 20.6 46 45.9 46h151.8a447.72 447.72 0 00199.5 48h2.1c59.8 0 117.7-11.6 172.3-34.3A443.2 443.2 0 00827 830.5c41.2-40.9 73.6-88.7 96.3-142 23.5-55.2 35.5-113.9 35.8-174.5.2-60.9-11.6-120-34.8-175.6zM312.4 560c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.4 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48z"}}]},name:"message",theme:"filled"};const xt=vt;var St=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:xt}))};const $t=s.forwardRef(St);var Mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.6 230.2L779.1 123.8a80.83 80.83 0 00-57.3-23.8c-21.7 0-42.1 8.5-57.4 23.8L549.8 238.4a80.83 80.83 0 00-23.8 57.3c0 21.7 8.5 42.1 23.8 57.4l83.8 83.8A393.82 393.82 0 01553.1 553 395.34 395.34 0 01437 633.8L353.2 550a80.83 80.83 0 00-57.3-23.8c-21.7 0-42.1 8.5-57.4 23.8L123.8 664.5a80.89 80.89 0 00-23.8 57.4c0 21.7 8.5 42.1 23.8 57.4l106.3 106.3c24.4 24.5 58.1 38.4 92.7 38.4 7.3 0 14.3-.6 21.2-1.8 134.8-22.2 268.5-93.9 376.4-201.7C828.2 612.8 899.8 479.2 922.3 344c6.8-41.3-6.9-83.8-36.7-113.8z"}}]},name:"phone",theme:"filled"};const wt=Mt;var Ot=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:wt}))};const Tt=s.forwardRef(Ot),Nt=()=>{const[e,l]=t.useState(!1),o=()=>{l(!0)},a=()=>{l(!1)},n=t.createElement(Y,{content:"Change Avatar",placement:"bottom"},t.createElement(ge,{size:50,style:{backgroundColor:"#00AC7C",verticalAlign:"middle"}},e?t.createElement(bt,{style:{cursor:"pointer"}}):"K"));return t.createElement("div",{onMouseEnter:o,onMouseLeave:a},n)},L=({handleClick:e,icon:l,isDisabled:o=!1,tooltip:a=""})=>{const{isRoleStats:n}=Z();return t.createElement(fe,{title:a,placement:"bottom"},t.createElement(z,{shape:"circle",style:{backgroundColor:"#172b4d",alignItems:"center",display:"flex",justifyContent:"center"},onClick:()=>e(),disabled:o||n},l))},zt=({isModalOpen:e,closeModal:l,handleSubmit:o,contact:a})=>{var d;const[n]=v.useForm(),{user:c,isLoading:r}=be(),u=F(ee,{onSuccess:()=>{m(),b.invalidateQueries("getContact")}}),f=async p=>{console.log(p),await u.mutate({...p,id:a.id})},m=()=>{l(),n.resetFields()};return s.useEffect(()=>{a.defaultMobileNumber?n.setFieldValue("defaultMobileNumber",a.defaultMobileNumber):n.resetFields()},[a]),t.createElement(he,{className:"modal-activity",open:e,onCancel:l,footer:null,title:null,closable:!1},t.createElement("div",{className:"modal-header"},t.createElement(N.Title,{level:5,style:{color:"white"}},"Set default mobile number for contacting this contact"),t.createElement(z,{onClick:l,style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},icon:t.createElement(ye,{style:{color:"white"}})})),t.createElement(h,{direction:"vertical",style:{padding:"20px",width:"100%",paddingTop:"30px"},size:0},t.createElement(v,{name:"basic",layout:"vertical",labelWrap:!0,onFinish:f,autoComplete:"off",form:n,initialValues:{columnLayout:"one"}},t.createElement(v.Item,{name:"defaultMobileNumber",label:"Mobile number",rules:[{required:!0,message:_}]},t.createElement(W,{style:{width:"100%"}},(d=c==null?void 0:c.numbers)==null?void 0:d.map(p=>t.createElement(W.Option,{value:p.mobileNumber,key:p.id},p.mobileNumber)))),t.createElement(h,{style:{paddingTop:"5px"}},t.createElement(z,{type:"primary",htmlType:"submit",loading:u.isLoading},"Save"),t.createElement(z,{onClick:m},"No")))))},At=({contact:e})=>{const[l,o]=t.useState(!1),[a,n]=t.useState(!1),[c,r]=t.useState(!1),{setIsModalOpen:u,setCallerNumber:f,setDestinationNumber:m}=Ee();return t.createElement(h,{style:{display:"flex",justifyContent:"space-between",borderTop:"2px solid #e8e8e8",borderBottom:"2px solid #e8e8e8",padding:"8px"}},t.createElement(L,{handleClick:()=>{f((e==null?void 0:e.defaultMobileNumber)??""),m((e==null?void 0:e.fields.mobile)??""),u(!0)},icon:t.createElement(Tt,{style:{color:"white",fontSize:"10px"}}),tooltip:"Click to call"}),t.createElement(L,{handleClick:()=>{o(!0)},icon:t.createElement($t,{style:{color:"white",fontSize:"10px"}}),tooltip:"Click to text"}),t.createElement(L,{handleClick:()=>{console.log("phone")},icon:t.createElement(Ct,{style:{color:"white",fontSize:"10px"}}),tooltip:"No email address found",isDisabled:!0}),t.createElement(L,{handleClick:()=>{n(!0)},icon:t.createElement(Ce,{style:{color:"white",fontSize:"10px"}}),tooltip:"Click to add deal"}),t.createElement(L,{handleClick:()=>{r(!0)},icon:t.createElement(ut,{style:{color:"white",fontSize:"10px"}}),tooltip:"Click to set the default mobile number for contacting this contact. This number will be automatically selected when initiating communication."}),l&&t.createElement(ve,{closeModal:()=>o(!1),isModalOpen:l,phoneNumbers:e.phoneNumbers,contact:e}),c&&t.createElement(zt,{isModalOpen:c,closeModal:()=>r(!1),contact:e}),a&&t.createElement(xe,{isModalOpen:a,handleSubmit:()=>{n(!1),b.invalidateQueries("getContact")},closeModal:()=>n(!1),contactId:e.id}))},kt=({contact:e})=>{var x,$,D;const l=Se(),[o,a]=t.useState(!1),[n,c]=t.useState(!1),[r]=v.useForm(),{contactTypes:u,isLoading:f}=$e(),m=(x=e.fields)!=null&&x.contactTypelookupIds?JSON.parse(e.fields.contactTypelookupIds)[0]:"0",[d,p]=t.useState(""),{isRoleStats:y}=Z(),{data:C,refetch:A}=Me("contact"),S=C==null?void 0:C.flatMap(i=>i.fields),M=F(Ie,{onSuccess:()=>{b.invalidateQueries("getContact")},onError:i=>{console.log(i.message||"An error occurred")}}),w=F(Be,{onSuccess:()=>{b.invalidateQueries("contacts"),b.invalidateQueries("filteredContacts"),l("/contacts")}}),O=F(De,{onSuccess:i=>{Le.success("Cloned successfully"),window.location.replace("/contacts/"+i.data.id)}}),E=[{label:t.createElement("div",{onClick:()=>{c(!0)}},"Edit"),key:"0"},{label:t.createElement(q,{title:"Clone Contact",description:"Are you sure to clone this contact?",onConfirm:()=>{O.mutate({contactId:e.id})}},t.createElement("div",null,"Clone")),key:"1"},{label:t.createElement(q,{title:"Delete Contact",description:"Are you sure to delete this contact?",onConfirm:()=>{w.mutate({contactId:[e.id]})}},t.createElement("div",null,"Delete")),key:"4"}];F(ee,{onSuccess:()=>{r.resetFields(),b.invalidateQueries("getContact"),b.invalidateQueries("thread")}});const g=async i=>{if(i.key!="new"){const R={contactType:[i.key]};M.mutate({fields:R,customableId:e.id,customableType:"contact"})}};return t.createElement(we,{style:{width:"100%"}},t.createElement(h,{direction:"vertical",style:{width:"100%",overflow:"hidden",textOverflow:"ellipsis"},size:"large"},t.createElement(Oe,null,t.createElement(U,{span:12},t.createElement(Te,{overlay:t.createElement(T,{onClick:g,selectedKeys:[m]},t.createElement(T.Item,{key:"search"},t.createElement(J,{placeholder:"Search",onKeyUp:i=>p(i.target.value),onClick:i=>i.stopPropagation()})),t.createElement(T.Item,{key:"disabled",disabled:!0},t.createElement(N.Text,{strong:!0},"SELECT CONTACT TYPE")),t.createElement(T.Item,{key:0,disabled:y},t.createElement(G,null,"No Type")),($=u==null?void 0:u.filter(i=>i.name.includes(d)))==null?void 0:$.map(i=>t.createElement(T.Item,{key:i.id,disabled:y},t.createElement(G,{color:i.highlight},i.name))),t.createElement(T.Divider,null),t.createElement(T.Item,{key:"new",disabled:y},t.createElement("a",{onClick:i=>{i.preventDefault(),a(!0)}},"Create New Type"))),trigger:["click"]},t.createElement(Y,{content:t.createElement(Ft,{onClose:()=>a(!1)}),title:t.createElement(h,null,t.createElement(Ne,{onClick:()=>a(!1)}),t.createElement(N.Text,null,"CREATE NEW TYPE")),visible:o,placement:"rightTop"},t.createElement("div",{style:{cursor:"pointer"}},t.createElement(Re,{fields:e.fields}))))),t.createElement(U,{span:12,style:{float:"right"}},t.createElement(Pe,{menuList:E,label:"Actions",floatRight:!0,disabled:y}))),t.createElement(h,null,t.createElement(_e,{count:1,offset:[-8,8],showZero:!0},t.createElement(Nt,null)),t.createElement(ze,{to:"/contacts/"+e.id+"/"+e.fields.firstName.replace(/\s/g,"-")+"-"+e.fields.lastName.replace(/\s/g,"-")},t.createElement(N.Title,{level:5},e.fields.firstName+" "+e.fields.lastName))),(D=e.duplicatePhoneNumbers)!=null&&D.length?t.createElement(Ae,{message:t.createElement(t.Fragment,null,t.createElement(N.Text,null,"Duplicate phone number/s with the following contact:"),t.createElement("ul",null,e.duplicatePhoneNumbers.map(i=>t.createElement("li",null,i)))),type:"warning"}):null,t.createElement(At,{contact:e}),t.createElement(h,{style:{width:"100%",justifyContent:"space-between"}},t.createElement(N.Text,{strong:!0},"Contact Details")),t.createElement(it,{column:1,size:"small"},S==null?void 0:S.filter(i=>(i==null?void 0:i.fieldName)!=="firstName"&&(i==null?void 0:i.fieldName)!=="lastName").map(i=>t.createElement("div",{key:i==null?void 0:i.fieldName,style:{borderBottom:"1px solid #F0F0F0",paddingBottom:0}},t.createElement("div",{style:{minWidth:"100px",textAlign:"left"}},t.createElement(ke,null,`${i==null?void 0:i.label}: `)),t.createElement(Ve,{record:e.fields,field:i,handleSubmit:()=>{b.invalidateQueries("getContact"),b.invalidateQueries("thread")}}))))),n&&t.createElement(Fe,{isModalOpen:n,closeModal:()=>{c(!1)},handleSubmit:()=>{b.invalidateQueries("contacts"),b.invalidateQueries("filteredContacts"),b.invalidateQueries("getContact")},type:"contact",record:e.fields}))},Ft=({onClose:e})=>{const[l]=v.useForm(),o=v.useWatch("highlight",l),a=F(He,{onSuccess:()=>{b.invalidateQueries("contactTypesAll"),l.resetFields(),e()}}),n=({color:r})=>t.createElement(z,{style:{backgroundColor:r},shape:"circle",size:"small",onClick:()=>{console.log(r),l.setFieldsValue({highlight:r})}},o==r&&t.createElement(je,{style:{color:"white"}})),c=r=>{console.log(r),a.mutate(r)};return t.createElement(h,{direction:"vertical"},t.createElement(v,{form:l,layout:"vertical",onFinish:c},t.createElement(v.Item,{label:"Name",name:"name",required:!0,rules:[{required:!0,message:_}]},t.createElement(J,null)),t.createElement(v.Item,{label:"Highlights",name:"highlight",required:!0,rules:[{required:!0,message:_}]},t.createElement(h,{direction:"vertical"},t.createElement(N.Text,{style:{fontSize:"11px"}},"Color code your contact type"),t.createElement(h,null,t.createElement(n,{color:"magenta"}),t.createElement(n,{color:"red"}),t.createElement(n,{color:"yellow"}),t.createElement(n,{color:"orange"}),t.createElement(n,{color:"gold"}),t.createElement(n,{color:"gray"})),t.createElement(h,null,t.createElement(n,{color:"lime"}),t.createElement(n,{color:"green"}),t.createElement(n,{color:"cyan"}),t.createElement(n,{color:"blue"}),t.createElement(n,{color:"violet"}),t.createElement(n,{color:"purple"})))),t.createElement(v.Item,null,t.createElement(h,{style:{float:"right"}},t.createElement(z,{type:"primary",htmlType:"submit",loading:a.isLoading},"Create"),t.createElement(z,{htmlType:"reset",onClick:()=>e()},"Cancel")))))};export{kt as C,it as D};
