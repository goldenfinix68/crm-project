import{au as v,I as r,aQ as N,K as w,r as C,J as e,a8 as I,$ as d,N as u,A as x,U as E,W as p,aW as o,aP as S}from"./app-966f6542.js";import{e as U}from"./useContactMutation-7127c8f1.js";const V=({isModalOpen:h,closeModal:f,handleSubmit:c,selectedRowKeys:g,defaultCustomFieldId:s,type:y="contact"})=>{v();const[l]=r.useForm(),{data:n,isLoading:k,refetch:B}=N("contact"),b=r.useWatch("customFieldId",l),t=n==null?void 0:n.find(a=>a.id==b),i=()=>{f(),l.resetFields()},m=w(U,{onSuccess:()=>{i(),c&&c()}}),F=a=>{m.mutate({contactIds:g,fieldValue:a[t==null?void 0:t.fieldName],customField:t,action:(a==null?void 0:a.action)??"",type:y})};return C.useEffect(()=>{s&&l.setFieldValue("customFieldId",s)},[s]),e.createElement(e.Fragment,null,e.createElement(I,{closable:!1,className:"your-modal",width:500,title:null,open:h,style:{maxHeight:"700px"},footer:null},e.createElement("div",{className:"modal-header"},e.createElement(d.Title,{level:5,style:{color:"white"}},"Select Field to Update"),e.createElement(u,{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},onClick:()=>{i()},icon:e.createElement(x,{style:{color:"white"}})})),e.createElement("div",{className:"modal-content"},e.createElement(r,{form:l,onFinish:F,layout:"vertical",initialValues:{ownerId:1},className:"p-t-xl"},e.createElement(r.Item,{name:"customFieldId",rules:[{required:!0,message:E}]},e.createElement(p,{defaultValue:"Select",style:{width:"100%"},showSearch:!0,optionFilterProp:"children",disabled:!!s},n==null?void 0:n.map(a=>e.createElement(p.Option,{value:a.id},a.label)))),t?e.createElement(e.Fragment,null,e.createElement(d,{className:"m-b-md"},"Enter a new value for the field"," ",t==null?void 0:t.label),(t==null?void 0:t.type)=="tag"&&e.createElement("center",null,e.createElement(r.Item,{name:"action",rules:[{required:!0,message:E}],initialValue:"add"},e.createElement(o.Group,null,e.createElement(o.Button,{value:"add"},"Add"),e.createElement(o.Button,{value:"remove"},"Remove")))),e.createElement(S,{customField:t,showLabel:!1})):null)),e.createElement("div",{className:"modal-footer"},e.createElement(u,{className:"m-r-xs",type:"primary",onClick:()=>{l.validateFields().then(a=>{l.submit()})},loading:m.isLoading},"Save"))))};export{V as C};
