import{r as o,B as X,_ as Z,K as Y,L as k,bJ as xe,J as e,a5 as z,T as ie,a9 as be,M as v,N as h,I as $,ap as Se,bK as de,aP as ue,af as Ce,aN as Te,a8 as ee,$ as C,Z as K,Y as L,V,b0 as R,S as te,a1 as H,ae as Ie,O as ae,P as ne,aB as le,ah as Q,bt as O,bL as ke,aQ as we,bM as Le,bN as Me,A as se,U as Fe,aY as y,ab as Ne,bO as Ae,a6 as Oe,bP as ze,aV as G,aX as j,av as $e,bQ as De,aA as Be,a4 as Ye,bR as _e,bS as Re,a2 as Pe}from"./app-dd4201df.js";import{C as Qe}from"./ContactInfo-72f1958b.js";import{T as J}from"./index-bb58a160.js";import{I as Ke}from"./InboxOutlined-6626cce8.js";import{D as pe}from"./DeleteOutlined-5bd8580d.js";import{C as Ve}from"./ConfirmModal-b161f788.js";import{C as Ue}from"./ContactBulkUpdate-aea4a385.js";import"./DropdownComponent-b661b5ed.js";import"./useContactMutation-21defeb5.js";import"./ContactTypeTag-cd3d2faa.js";import"./TextEllipsis-40bab104.js";import"./ContactInfoEditableText-67841ea0.js";import"./index-52fd1a5c.js";var We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};const Ge=We;var qe=function(a,n){return o.createElement(X,Z({},a,{ref:n,icon:Ge}))};const He=o.forwardRef(qe);var je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};const Je=je;var Xe=function(a,n){return o.createElement(X,Z({},a,{ref:n,icon:Je}))};const Ze=o.forwardRef(Xe);var et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM699 387c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64z"}}]},name:"tag",theme:"filled"};const tt=et;var at=function(a,n){return o.createElement(X,Z({},a,{ref:n,icon:tt}))};const ge=o.forwardRef(at),nt=({name:c,text:a})=>{const n=Y(xe,{onSuccess:s=>{k.invalidateQueries("thread")}});return a.isFromApp?e.createElement("div",{style:{padding:"10px",display:"flex",alignItems:"center",flexDirection:"row-reverse"}},e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"}},e.createElement("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#D6EAFF",padding:"12px 24px",borderRadius:"20px 20px 0 20px"}},a.status=="failed"?e.createElement(ie,{title:a==null?void 0:a.errorMessage},e.createElement(He,{style:{color:"red"}})):null,a.status=="scheduled"&&a.schedule?e.createElement(ie,{title:`Will be sent on ${z.utc(a.schedule).local().format("MMM DD, YYYY hh:mm A")}`},e.createElement(be,null)):null,e.createElement("div",{className:"p-l-xs"},a.message)),e.createElement(v,{style:{marginTop:"8px",fontSize:"10px"},size:1},`${z.utc(a.created_at).local().format("MMM DD, YYYY hh:mm A")} ${a.to.replace(/^(\d{3})(\d{3})(\d{4})$/,"($1) $2-$3")}`,a.status=="failed"&&e.createElement(h,{className:"p-0",type:"text",style:{color:"red",cursor:"pointer",fontSize:"10px"},onClick:()=>{n.mutate({data:{id:a.id},url:"/api/texts/resend"})},loading:n.isLoading},"Re-try"),a.status=="queued"&&e.createElement("div",null,"(Sending)")))):e.createElement("div",{style:{padding:"10px",display:"flex",alignItems:"center"}},e.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.createElement("div",{style:{backgroundColor:"white",padding:"12px 24px",borderRadius:"20px 20px 20px 0"}},a.message),e.createElement("div",{style:{marginTop:"8px",fontSize:"10px"}},`${a.from.replace(/^(\d{3})(\d{3})(\d{4})$/,"($1) $2-$3")} ${z.utc(a.created_at).local().format("MMM DD, YYYY hh:mm A")}`)))},lt=({isModalOpen:c,closeModal:a,handleSubmit:n,contactNumber:s})=>{const[d]=$.useForm(),[u,p]=o.useState(1),[r,g]=o.useState(void 0),[f,T]=o.useState(),[x,E]=o.useState(""),[t,F]=o.useState(!1),{data:w,refetch:_}=Se({keyword:x},"/api/contacts/global-search","globalSearch",()=>{F(!1)}),D=de.debounce(m=>{i(m)},300),i=m=>{E(m)};o.useEffect(()=>{F(!0),_()},[x]),o.useEffect(()=>{w&&w.data&&T(w.data.data)},[w]);const{data:b,isLoading:S,refetch:I}=ue("contact"),N=Y(Te,{onSuccess:()=>{M(),n&&n()},onError:m=>{Ce.error(m.message||"An error occurred")}}),M=()=>{a(),d.resetFields()};return console.log({contactFields:b}),e.createElement(ee,{title:e.createElement(C.Text,null,"Select Contact"),open:c,onCancel:M,className:"manage-column-field",footer:!1},u===1?e.createElement(e.Fragment,null,e.createElement(K,{gutter:12},e.createElement(L,{span:24},e.createElement(V,{placeholder:"Search Contact",className:"w-100",onChange:m=>{D(m.target.value)}})),e.createElement(L,{span:24,className:"m-t-md"},e.createElement(R,{className:"field-list",size:"default",header:!1,footer:!1,bordered:!0},e.createElement(e.Fragment,null,t&&e.createElement("div",{style:{display:"grid",placeItems:"center",padding:"24px"}},e.createElement(te,null)),!t&&e.createElement(e.Fragment,null,f!=null&&f.length?f==null?void 0:f.map(m=>e.createElement("div",{className:"w-100",onClick:()=>{p(2),g(m)}},e.createElement(me,{text:`${m.fields.firstName} ${m.fields.lastName}`}))):e.createElement(H,{image:H.PRESENTED_IMAGE_SIMPLE}))))))):e.createElement(e.Fragment,null,e.createElement(v,{className:"m-b-sm"},e.createElement(C.Text,{strong:!0},`Phone type fields of ${r==null?void 0:r.fields.firstName} ${r==null?void 0:r.fields.lastName}`),e.createElement(h,{type:"link",className:"p-l-none",onClick:()=>p(1)},"Change")),e.createElement(R,{className:"field-list",size:"large",header:!1,footer:!1,bordered:!0,dataSource:b==null?void 0:b.filter(m=>["phone","mobile"].includes(m.type)),renderItem:m=>e.createElement(Ie,{title:"Update Contact",description:`Are you sure you want to replace this field with ${s}?`,onConfirm:async()=>{await N.mutate({customableId:r==null?void 0:r.id,customableType:"contact",fields:{[m.fieldName]:s}})}},e.createElement("div",{className:"w-100"},e.createElement(me,{text:m.label,subText:(r==null?void 0:r.fields[m.fieldName])??"Not set"})))})))},me=({text:c,subText:a})=>e.createElement(e.Fragment,null,e.createElement(R.Item,{style:{cursor:"pointer"}},e.createElement(v,{direction:"vertical",size:0},e.createElement(C.Text,{strong:!0},c),e.createElement(C.Text,null,a??"")))),Ee=()=>{const{data:c,isLoading:a}=ae("textLabels",async()=>{const n=localStorage.getItem("access_token");return(await ne.get("/api/text-labels",{headers:{Authorization:`Bearer ${n}`}})).data},{staleTime:1/0});return{labels:c,isLoading:a}},st=(c,a)=>{const{data:n,isLoading:s,refetch:d}=ae("textThreads",async()=>{const u=localStorage.getItem("access_token");return(await ne.get("/api/text-threads",{headers:{Authorization:`Bearer ${u}`},params:c})).data},{staleTime:1/0,onSuccess:()=>{a&&a()}});return{data:n,isLoading:s,refetch:d}},ot=(c,a,n)=>{const{data:s,isLoading:d,isError:u,refetch:p}=ae("thread",async()=>{try{const r=localStorage.getItem("access_token");return(await ne.get(`/api/text-threads/${c}?type=${a}`,{headers:{Authorization:`Bearer ${r}`}})).data}catch(r){throw new Error(`Error fetching text thread: ${r.message}`)}},{staleTime:1/0,onSuccess:r=>{n&&n(r)}});return{thread:s,isLoading:d,isError:u,refetch:p}},rt=({menu:c})=>{var b,S,I,N,M;const a=le(),[n,s]=o.useState(!1),[d,u]=e.useState(0),p=e.useRef(null),[r,g]=o.useState(!1),[f,T]=o.useState(!1),{threadId:x}=Q(),{contactId:E}=Q(),{thread:t,refetch:F,isLoading:w}=ot(E??x??"",E?"contact":"thread",m=>{s(!1)}),_=Y(Le,{onSuccess:()=>{}});o.useEffect(()=>{!x&&!E?a("/text-threads"):(s(!0),F())},[x,E]),e.useEffect(()=>{t&&(_.mutate({id:E??x,type:E?"contact":"thread"}),document.title=t.contactName+" - SpeedLead")},[t]);const D=()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},i=t==null?void 0:t.texts[(t==null?void 0:t.texts.length)-1];return e.useEffect(()=>(D(),u(d+1),console.log("thread",t),()=>{}),[t]),["all","inbox","scheduled"].includes(c)?e.createElement(e.Fragment,null,n?e.createElement("div",{style:{display:"grid",placeItems:"center",marginTop:"50%"}},e.createElement(te,null)):e.createElement(K,{key:x},e.createElement(L,{span:13,style:{height:"85vh",overflowY:"auto"},ref:p},e.createElement("div",{style:{backgroundColor:"white",width:"100%",padding:"15px",display:"flex",alignItems:"center",position:"sticky",top:0,zIndex:1}},e.createElement(v,{direction:"vertical",size:0},(b=t==null?void 0:t.contact)!=null&&b.id?e.createElement(O,{to:"/contacts/"+((S=t==null?void 0:t.contact)==null?void 0:S.id)+"/"+t.contact.fields.firstName.replace(/\s/g,"-")+"-"+t.contact.fields.lastName.replace(/\s/g,"-")},e.createElement(C.Text,{strong:!0},t==null?void 0:t.contactName)):e.createElement(C.Text,{strong:!0},t==null?void 0:t.contactName),e.createElement(C.Text,null,t==null?void 0:t.phoneNumbers))),e.createElement("div",{style:{paddingTop:"150px",height:"85%"}},e.createElement("div",{style:{minHeight:"80%"}},(I=t==null?void 0:t.texts)==null?void 0:I.sort((m,P)=>parseInt(m.id??"0")-parseInt(P.id??"0")).map(m=>e.createElement(nt,{name:t==null?void 0:t.contactName,text:m,key:m.id}))),e.createElement("div",{style:{position:"sticky",bottom:0,left:0,width:"100%",backgroundColor:"white",padding:"10px"},key:d},e.createElement(ke,{handleSubmit:()=>{k.invalidateQueries("thread")},phoneNumbers:t!=null&&t.contact?(N=t==null?void 0:t.contact)==null?void 0:N.phoneNumbers:[t==null?void 0:t.phoneNumbers],defaultTo:i!=null&&i.isFromApp?i==null?void 0:i.to:i==null?void 0:i.from,defaultFrom:((M=t==null?void 0:t.contact)==null?void 0:M.defaultMobileNumber)??(i!=null&&i.isFromApp?i==null?void 0:i.from:i==null?void 0:i.to),contact:(t==null?void 0:t.contact)??void 0})))),e.createElement(L,{span:11,style:{height:"85vh",overflowY:"auto"}},e.createElement(v,{direction:"vertical",size:0,style:{width:"100%",overflowY:"auto"}},e.createElement("div",{style:{backgroundColor:"#F5F5F5",width:"100%",padding:"15px",display:"flex",fontWeight:"bold",height:"74px",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"16px"}},"Related Information"),t!=null&&t.contact?e.createElement(Qe,{contact:t==null?void 0:t.contact}):e.createElement(v,{style:{textAlign:"center"},className:"w-100",size:"large",direction:"vertical"},"Number not saved in contacts",e.createElement(h,{onClick:()=>g(!0)},"Create Contact"),e.createElement(h,{onClick:()=>T(!0)},"Add to existing Contact")))),r&&e.createElement(we,{isModalOpen:r,closeModal:()=>{g(!1)},handleSubmit:()=>{k.invalidateQueries("textThreads"),k.invalidateQueries("thread")},type:"contact",record:{mobile:t==null?void 0:t.phoneNumbers}}),f&&e.createElement(lt,{isModalOpen:f,closeModal:()=>T(!1),handleSubmit:()=>{k.invalidateQueries("textThreads"),k.invalidateQueries("thread")},contactNumber:t==null?void 0:t.phoneNumbers}))):null},ct=({isModalOpen:c,closeModal:a,textLabel:n})=>{const[s]=$.useForm(),d=Y(Me,{onSuccess:()=>{k.invalidateQueries("textLabels"),a(),p()},onError:r=>{console.log(r.message||"An error occurred")}}),u=async r=>{await d.mutate({...r,id:n!=null&&n.id?n.id:""})},p=()=>{a(),s.resetFields()};return o.useEffect(()=>{n!=null&&n.name?s.setFieldValue("name",n.name):s.resetFields()},[n]),e.createElement(ee,{className:"modal-activity",open:c,onCancel:a,footer:null,title:null,closable:!1},e.createElement("div",{className:"modal-header"},e.createElement(C.Title,{level:5,style:{color:"white"}},n?"Update":"Create new"," label"),e.createElement(h,{onClick:a,style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},icon:e.createElement(se,{style:{color:"white"}})})),e.createElement(v,{direction:"vertical",style:{padding:"20px",width:"100%",paddingTop:"30px"},size:0},e.createElement($,{name:"basic",layout:"vertical",labelWrap:!0,onFinish:u,autoComplete:"off",form:s},e.createElement($.Item,{name:"name",label:"Label name",rules:[{required:!0,message:Fe}]},e.createElement(V,{placeholder:"Folder name"})),e.createElement(v,{style:{paddingTop:"5px"}},e.createElement(h,{type:"primary",htmlType:"submit",loading:d.isLoading},"Save"),e.createElement(h,{onClick:p},"Cancel")))))},it=({handleLabelChange:c})=>{var E;const a=le(),{labels:n,isLoading:s}=Ee(),[d,u]=e.useState(""),[p,r]=o.useState(!1),[g,f]=o.useState(!1),[T,x]=o.useState(void 0);return e.createElement(e.Fragment,null,e.createElement(y,{onClick:t=>{t.key!="labels"?t.key=="inbox"?a("/text-threads"):t.key=="templates"?a("/text-templates"):a("/texts/"+t.key):r(!p)},mode:"horizontal"},e.createElement(y.Item,{key:"inbox",icon:e.createElement(Ke,null)},e.createElement(O,{to:"/text-threads"},"Inbox")),e.createElement(y.Item,{key:"scheduled",icon:e.createElement(Ne,null)},e.createElement(O,{to:"/texts/scheduled"},"Scheduled")),e.createElement(y.Item,{key:"sent",icon:e.createElement(Ze,null)},e.createElement(O,{to:"/texts/sent"},"Sent")),e.createElement(y.Item,{key:"failed",icon:e.createElement(pe,null)},e.createElement(O,{to:"/texts/failed"},"Failed")),e.createElement(y.Item,{key:"templates",icon:e.createElement(Ae,null)},e.createElement(O,{to:"/text-templates"},"Templates")),e.createElement(y.Item,{key:"labels",icon:e.createElement(ge,{style:{transform:"rotate(45deg)"}})},e.createElement(e.Fragment,null,e.createElement(Oe,{overlay:e.createElement(y,{onClick:t=>{t.key!="new"?c(t):f(!g)}},e.createElement(y.Item,{key:"search"},e.createElement(V,{placeholder:"Search",onKeyUp:t=>u(t.target.value),onClick:t=>t.stopPropagation()})),e.createElement(y.Item,{key:"disabled",disabled:!0},e.createElement(C.Text,{strong:!0},"SELECT TEXT LABEL")),e.createElement(y.Item,{key:""},e.createElement(J,null,"No label")),(E=n==null?void 0:n.filter(t=>t.name.includes(d)))==null?void 0:E.map(t=>e.createElement(y.Item,{key:t.name},e.createElement(J,null,t.name))),e.createElement(y.Divider,null),e.createElement(y.Item,{key:"new"},e.createElement("a",{onClick:t=>{t.preventDefault()}},"Create New Label"))),trigger:["click"],open:p},e.createElement(C.Text,null,"Labels"))))),e.createElement(ct,{isModalOpen:g,closeModal:()=>f(!1),textLabel:T}))},mt=({isModalOpen:c,closeModal:a,threadIds:n,defaultChecked:s,isViaMultiple:d})=>{const[u]=$.useForm(),{labels:p,isLoading:r}=Ee(),[g,f]=o.useState("add"),T=Y(ze,{onSuccess:()=>{k.invalidateQueries("textThreads"),E()}}),x=async t=>{console.log(t),await T.mutate({...t,threadIds:n,action:d?g:""})},E=()=>{a(),u.resetFields()};return o.useEffect(()=>{s&&u.setFieldValue("labels",s)},[s]),e.createElement(ee,{className:"modal-activity",open:c,onCancel:a,footer:null,title:null,closable:!1,width:"300px"},e.createElement("div",{className:"modal-header"},e.createElement(C.Title,{level:5,style:{color:"white"}},"Assign Label"),e.createElement(h,{onClick:a,style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},icon:e.createElement(se,{style:{color:"white"}})})),e.createElement(v,{direction:"vertical",style:{padding:"20px",width:"100%",paddingTop:"30px"},size:0},e.createElement($,{name:"basic",layout:"vertical",labelWrap:!0,onFinish:x,autoComplete:"off",form:u},d&&e.createElement("center",null,e.createElement(G.Group,{value:g,onChange:t=>f(t.target.value)},e.createElement(G.Button,{value:"add"},"Add"),e.createElement(G.Button,{value:"remove"},"Remove"))),e.createElement($.Item,{name:"labels",labelCol:{span:24},wrapperCol:{span:24}},e.createElement(j.Group,{style:{display:"flex",flexDirection:"column",padding:"8px"}},p==null?void 0:p.map(t=>e.createElement(j,{key:t.id,value:t.id,style:{marginBottom:"8px"}},t.name)))),e.createElement(v,{style:{paddingTop:"5px"}},e.createElement(h,{type:"primary",htmlType:"submit",loading:T.isLoading},"Save"),e.createElement(h,{onClick:E},"Cancel")))))},dt=({label:c})=>{var oe,re;const[a,n]=o.useState(!0);o.useState("");const[s,d]=o.useState({page_size:20,page:1,searchKey:"",label:"",total:0}),{array:u,updateById:p,setInitialArray:r}=$e(),{data:g,refetch:f}=st(s,()=>{n(!1)}),T=l=>{d({...s,searchKey:l.target.value,page:1})},x=de.debounce(l=>{T(l)},300);le();const[E,t]=o.useState(!1),[F,w]=o.useState(!1),[_,D]=o.useState(!1),[i,b]=o.useState(void 0),[S,I]=o.useState([]),[N,M]=o.useState(!1),[m,P]=o.useState(!1),{data:B,isLoading:ut,refetch:pt}=ue("contact"),fe=Y(Re,{onSuccess:()=>{k.invalidateQueries("textThreads"),t(!1),D(!1),b(void 0),I([])},onError:l=>{console.log(l.message||"An error occurred")}}),ye=(l,U)=>{d({...s,page:l,page_size:U})};return o.useEffect(()=>{d({...s,label:c})},[c]),o.useEffect(()=>{n(!0),f()},[s.page,s.searchKey,s.page_size,s.label]),o.useEffect(()=>{g&&g.data&&(r(g.data),d({...s,total:g.total}))},[g]),e.createElement(e.Fragment,null,e.createElement(V,{suffix:e.createElement(De,null),placeholder:"Search",style:{marginBottom:"20px"},onChange:x}),S.length?e.createElement(v,{style:{width:"100%"},size:0},e.createElement(h,{icon:e.createElement(se,null),type:"text",onClick:()=>{I([])}}),e.createElement(C.Text,null,(S==null?void 0:S.length)+" Selected"),e.createElement(h,{icon:e.createElement(pe,null),type:"text",onClick:()=>{P(!0),t(!0)}},"Delete"),e.createElement(h,{onClick:()=>{P(!0),M(!0)},type:"text",icon:e.createElement(ge,{style:{transform:"rotate(45deg)"}})},"Labels"),(B==null?void 0:B.find(l=>l.type=="tag"))&&e.createElement(h,{icon:e.createElement(Be,null),type:"text",onClick:()=>{w(!0)}},"Tag")):e.createElement("div",{style:{height:"32px"}}),e.createElement(R,{itemLayout:"horizontal",style:{marginTop:0,height:"69vh",overflow:"auto"}},a?e.createElement("div",{style:{display:"grid",placeItems:"center",marginTop:"50%"}},e.createElement(te,null)):e.createElement(e.Fragment,null,u!=null&&u.length||a?u==null?void 0:u.map((l,U)=>{var ce;return e.createElement(e.Fragment,null,U===0&&e.createElement(Ye,{style:{margin:"5px"}}),e.createElement(R.Item,{style:{cursor:"pointer",padding:"3px 0",backgroundColor:l.haveDuplicatePhoneNumbers?"#ffc166":""}},e.createElement(O,{onClick:()=>{p(l.id,{...l,isLastTextSeen:!0})},to:`/text-threads/${l.isContactSaved?`contact/${l.contactId}`:l.id}`,style:{padding:0,color:"black",width:"100%"}},e.createElement(K,{gutter:12,style:{width:"100%"}},e.createElement(L,{span:6},e.createElement(q,{style:{fontWeight:l!=null&&l.isLastTextSeen?"":"bold",fontSize:"16px"}},e.createElement(v,{onClick:A=>A.stopPropagation()},e.createElement(j,{checked:S.includes(l.id),onClick:A=>{const he=A.target.checked;I(he?W=>[...W,l.id]:W=>W.filter(ve=>ve!==l.id))}}),e.createElement("div",{style:{cursor:"default"}},"   ")),` ${l.contactName}`)),e.createElement(L,{span:15},e.createElement(q,{style:{fontWeight:l!=null&&l.isLastTextSeen?"":"bold"}},e.createElement(v,{size:0},(ce=l.labels)==null?void 0:ce.map(A=>e.createElement(J,{style:{float:"right",fontWeight:"normal"}},A==null?void 0:A.name)),l==null?void 0:l.lastText))),e.createElement(L,{span:3},e.createElement(q,{style:{textAlign:"right"}},z.utc(l==null?void 0:l.created_at).local().isSame(z(),"day")?z.utc(l==null?void 0:l.created_at).local().format("hh:mm A"):z.utc(l==null?void 0:l.created_at).local().format("MMM DD")))))))}):e.createElement(H,{style:{marginTop:"50%"}}))),e.createElement("center",null,e.createElement(_e,{className:"p-t-sm",current:s.page,pageSize:s.page_size,total:s.total,onChange:ye,showSizeChanger:!1,size:"small"})),E&&e.createElement(Ve,{title:"Confirm",message:"Are you sure you want to archive this thread?",handleNo:()=>{t(!1),b(void 0)},handleYes:async()=>{D(!0),await fe.mutate(m?{threadIds:S}:{threadIds:[i.id]}),b(void 0)},isOpen:E,loading:_}),N&&e.createElement(mt,{isModalOpen:N,closeModal:()=>{M(!1),b(void 0),I([])},threadIds:m?S:[(i==null?void 0:i.id)??""],defaultChecked:m||(oe=i==null?void 0:i.labels)==null?void 0:oe.map(l=>l.id??""),isViaMultiple:m}),F&&e.createElement(Ue,{isModalOpen:F,closeModal:()=>w(!1),handleSubmit:()=>{k.invalidateQueries("textThreads"),w(!1),b(void 0),I([])},selectedRowKeys:S,type:"thread",defaultCustomFieldId:(re=B==null?void 0:B.find(l=>l.type=="tag"))==null?void 0:re.id}))},q=({children:c,style:a})=>{const s={...{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",alignItems:"center",justifyContent:"center"},...a};return e.createElement("div",{style:s},c)},wt=()=>{o.useEffect(()=>(document.title="Texts - SpeedLead",()=>{}),[]);const[c,a]=o.useState(""),{threadId:n}=Q(),{contactId:s}=Q(),d=n||s;return e.createElement(v,{direction:"vertical",style:{width:"100%"}},e.createElement(it,{handleLabelChange:u=>a(u.key)}),e.createElement(Pe,{bodyStyle:{padding:0}},e.createElement(K,{gutter:0,style:{height:"85vh"}},e.createElement(L,{span:d?11:24,style:{padding:"24px"}},e.createElement(dt,{label:c})),d&&e.createElement(L,{span:13,style:{backgroundColor:"#F5F5F5",margin:0,height:"85vh",overflowY:"auto"}},e.createElement(rt,{menu:"all"})))))};export{wt as default};
