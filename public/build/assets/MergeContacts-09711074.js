import{aC as V,r as d,bj as W,K as F,J as e,Z as B,Y as Z,a2 as z,$ as g,bk as f,aW as K,N as k,L as _}from"./app-316255ff.js";import{m as q}from"./useContactMutation-1550982c.js";const G=()=>{var O;const L=V(),[C,E]=d.useState([]),[p,M]=d.useState([]),c=(O=W().state)==null?void 0:O.data,y=["firstName","lastName","mobile","countryLink","acres","phone","owner","email2","typeId","mailingStreetAddress","emailOptOut","mailingCity","mailingState","emailOptOutReason","mailingZip","mailingCountry","subdivision","APN","gMapLink","roadFrontage","redfinLink","openingBid","assessedValue","assessedVsOpeningMargin","assessedVsOpeningMultiple","wetlandsStatus","legalDescription","legalSubdivision","floodzone","topography","wireless1","wireless2","wireless3","wireless4","landline1","landline2","landline3","landline4","marketAreaName","hoa/poa?","skype","linkedIn","instagram","detailsDescription","tags","detailsLegalDescription","addressLine1","city","county","state","email","jobTitle","otherPhone","smsOptOut","website","facebook","twitter","addressLine2","zipCode","country"],w={firstName:"First Name",lastName:"Last Name",mobile:"Mobile",countryLink:"Country Link",acres:"Acres",phone:"Phone",owner:"Owner",email2:"Email 2",typeId:"Type",mailingStreetAddress:"Mailing Street Address",emailOptOut:"Email Opt Out",mailingCity:"Mailing City",mailingState:"Mailing State",emailOptOutReason:"Email Opt Out Reason",mailingZip:"Mailing Zip",mailingCountry:"Mailing Country",subdivision:"Subdivision",APN:"APN",gMapLink:"Google Map Link",roadFrontage:"Road Frontage",redfinLink:"Redfin Quick Link",openingBid:"Opening Bid",assessedValue:"Assessed Value",assessedVsOpeningMargin:"Assessed vs. Opening Bid Margin (manual)",assessedVsOpeningMultiple:"Assessed vs. Opening Bid Multiple (manual)",wetlandsStatus:"Wetlands Status",legalDescription:"Legal Description",legalSubdivision:"Legal Subdivision",floodzone:"Flood Zone",topography:"Topography",wireless1:"Wireless 1",wireless2:"Wireless 2",wireless3:"Wireless 3",wireless4:"Wireless 4",landline1:"Landline 1",landline2:"Landline 2",landline3:"Landline 3",landline4:"Landline 4",marketAreaName:"MarketAreaName","hoa/poa":"HOA/ POA?",skype:"Skype",linkedIn:"LinkedIn",instagram:"Instagram",detailsDescription:"Details Description",tags:"Tags",detailsLegalDescription:"Details Legal Description",addressLine1:"Address Line 1",city:"City",county:"County",state:"State",email:"Email",jobTitle:"Job Title",otherPhone:"Other Phone",smsOptOut:"SMS Opt Out",website:"Website",facebook:"Facebook",twitter:"Twitter",addressLine2:"Address Line 2",zipCode:"ZipCode",country:"Country"},A=["emailOptOut","floodzone","smsOptOut"];d.useEffect(()=>{if(c.length>0){const t=c.map(a=>{const r=Object.entries(a).filter(([P,Q])=>y.includes(P));return Object.fromEntries(r)}),s=c.map(a=>a.id);T(s),Object.entries(c[0]).filter(([a,i])=>y.includes(a));const n=Object.keys(t[0]);let m={};m={title:n};let b=[["title","Master Record"]];t.forEach((a,i)=>{let r=Object.values(a),l="contact_"+i;b.push([l,a.firstName+" "+a.lastName]),m={...m,[l]:r}});const I=Object.keys(m),h=[];for(let a=0;a<n.length;a++){let i={};I.forEach(r=>{const l=m[r];Array.isArray(l)&&l.length>a&&(i={...i,[r]:l[a]})}),h.push(i)}E(h),M(b)}},[c]);const[u,S]=d.useState({}),[D,T]=d.useState();d.useEffect(()=>{console.log(u)},[u]);const v=(t,s)=>{S(o=>({...o,[t.title]:t[s]}))},N=(t,s)=>{if(Object.keys(u).length)return u[t.title]===t[s]},j=F(q,{onSuccess:()=>{console.log("success"),L("/contacts"),_.invalidateQueries("contacts")}}),R=()=>{let t={data:u,id:D};j.mutate(t)};return e.createElement(e.Fragment,null,e.createElement(B,null,e.createElement(Z,{lg:16,md:16,offset:4},e.createElement(z,null,e.createElement(g.Title,{level:4},"Merge Contacts"),e.createElement(g.Title,{level:5},"Merge Details"),e.createElement(f,{dataSource:C,pagination:!1},p.length>0&&p.map((t,s)=>e.createElement(f.Column,{key:s,dataIndex:t[0],title:t[1],render:(o,n)=>t[0]==="title"?e.createElement("span",null,w[o]):e.createElement(K,{key:s,checked:N(n,t[0]),onChange:()=>{console.log("asdadasd",n&&n.title),v(n,t[0])}},A.includes(n&&n.title)?o==1?"Yes":"No":o)}))),e.createElement(g.Title,{level:5,className:"m-t-lg"},"Please note the following."),e.createElement("ul",null,e.createElement("li",null,"The attachments, activities and notes will be transferred to the master Contact."),e.createElement("li",null,"The action can't be reverted.")),e.createElement(k,{type:"primary",className:"m-r-sm",onClick:()=>{R()}},"I Understand, Merge Now"),e.createElement(k,null,"Cancel")))))};export{G as default};
