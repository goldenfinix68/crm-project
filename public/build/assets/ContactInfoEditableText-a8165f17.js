import{I as m,J as a,K as E,L as N,aa as v,aO as d,aA as T,T as h,aP as w,bv as C}from"./app-c6c04cd4.js";import{C as I}from"./ContactTypeTag-6eefa966.js";import{T as b}from"./TextEllipsis-0f9fb9e9.js";import{T as k}from"./index-5fd3205c.js";const M=({record:t,field:e,handleSubmit:r})=>{const[n]=m.useForm(),[u,o]=a.useState(!1),[c,l]=a.useState(!1),p=E(d,{onSuccess:()=>{N.invalidateQueries("contacts"),r&&r()},onError:s=>{v.error(s.message||"An error occurred")}}),f=async s=>{n.isFieldsTouched(!0)&&await p.mutate({customableId:t.contactId,customableType:"contact",fields:s})},i=()=>{if(e.type=="contactTypeLookup")return a.createElement(I,{fields:t});if(e.type=="tag"&&t[e.fieldName]){const s=JSON.parse(t[e.fieldName+"lookupIds"]);if(Array.isArray(s))return s==null?void 0:s.map(y=>a.createElement(k,null,y))}return e.type=="url"&&t[e.fieldName]?a.createElement("a",{href:t[e.fieldName],target:"_blank"},t[e.fieldName]):e.type=="currency"&&t[e.fieldName]?C(t[e.fieldName]):t[e.fieldName]?t[e.fieldName]:"_"};return a.createElement("div",{style:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},!u&&(e.type=="url"&&t[e.fieldName]?a.createElement("div",{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)},c&&a.createElement(T,{className:"p-r-xs",style:{cursor:"pointer"},onClick:()=>o(!0)}),i()):a.createElement("div",{onDoubleClick:()=>{o(!0)},style:{width:"100%",cursor:"pointer"}},a.createElement(h,{title:i()},a.createElement(b,null,i())))),u&&a.createElement("div",{onBlur:()=>{n.submit(),o(!1),l(!1)},style:{overflow:"hidden",textOverflow:"ellipsis",width:"100%"}},a.createElement(m,{form:n,onFinish:f,initialValues:{[e.fieldName]:t[e.fieldName+"lookupIds"]?JSON.parse(t[e.fieldName+"lookupIds"]):t[e.fieldName]},layout:"vertical"},a.createElement(w,{showLabel:!1,customField:e,isSelectOptionsOpen:!0}))))};export{M as C};
