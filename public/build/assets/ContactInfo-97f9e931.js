import{J as t,r as s,bX as X,t as se,c as j,g as re,m as ie,b as ce,p as me,C as de,y as ue,u as pe,B as P,_ as B,a_ as Y,aU as ge,ak as Z,T as fe,N as z,I as v,a3 as be,K as F,L as h,a8 as he,$ as T,A as ye,M as E,U as V,W,bt as Ee,bF as Ce,ar as ve,bY as xe,br as Se,aC as $e,bZ as we,b_ as Me,a2 as Oe,Z as Ne,Y as U,a6 as Te,aZ as N,V as J,b$ as Fe,bu as ze,c0 as Ae,aR as Ie,aO as Le,aa as je,ag as q,z as Pe}from"./app-12367ae8.js";import{S as Be,D as De}from"./DropdownComponent-847582d7.js";import{a as ee,d as He,c as Re,b as ke}from"./useContactMutation-3ababb15.js";import{a as _e,C as Ve}from"./ContactInfoEditableText-2a371276.js";import{T as Qe}from"./TextEllipsis-77fe4724.js";import{T as G}from"./index-7be4deb3.js";import{B as We}from"./index-bcbd0851.js";const Ue={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},qe=Ue,Ge=t.createContext({}),te=Ge;var Ke=globalThis&&globalThis.__rest||function(e,l){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)l.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]]);return o};const Xe=e=>se(e).map(l=>Object.assign(Object.assign({},l==null?void 0:l.props),{key:l.key}));function Ye(e,l,o){const a=s.useMemo(()=>l||Xe(o),[l,o]);return s.useMemo(()=>a.map(c=>{var{span:r}=c,p=Ke(c,["span"]);return Object.assign(Object.assign({},p),{span:typeof r=="number"?r:X(e,r)})}),[a,e])}function K(e,l,o){let a=e,n=!1;return(o===void 0||o>l)&&(a=Object.assign(Object.assign({},e),{span:l}),n=o!==void 0),[a,n]}function Ze(e,l){const o=[];let a=[],n=l,c=!1;return e.filter(r=>r).forEach((r,p)=>{const y=r==null?void 0:r.span,d=y||1;if(p===e.length-1){const[m,u]=K(r,n,y);c=c||u,a.push(m),o.push(a);return}if(d<n)n-=d,a.push(r);else{const[m,u]=K(r,n,d);c=c||u,a.push(m),o.push(a),n=l,a=[]}}),[o,c]}const Je=(e,l)=>{const[o,a]=s.useMemo(()=>Ze(l,e),[l,e]);return o},et=Je,tt=e=>{let{children:l}=e;return l},lt=tt;function H(e){return e!=null}const at=e=>{const{itemPrefixCls:l,component:o,span:a,className:n,style:c,labelStyle:r,contentStyle:p,bordered:y,label:d,content:m,colon:u}=e,b=o;return y?s.createElement(b,{className:j({[`${l}-item-label`]:H(d),[`${l}-item-content`]:H(m)},n),style:c,colSpan:a},H(d)&&s.createElement("span",{style:r},d),H(m)&&s.createElement("span",{style:p},m)):s.createElement(b,{className:j(`${l}-item`,n),style:c,colSpan:a},s.createElement("div",{className:`${l}-item-container`},(d||d===0)&&s.createElement("span",{className:j(`${l}-item-label`,{[`${l}-item-no-colon`]:!u}),style:r},d),(m||m===0)&&s.createElement("span",{className:j(`${l}-item-content`),style:p},m)))},k=at;function _(e,l,o){let{colon:a,prefixCls:n,bordered:c}=l,{component:r,type:p,showLabel:y,showContent:d,labelStyle:m,contentStyle:u}=o;return e.map((b,g)=>{let{label:A,children:S,prefixCls:w=n,className:M,style:O,labelStyle:C,contentStyle:f,span:x=1,key:$}=b;return typeof r=="string"?s.createElement(k,{key:`${p}-${$||g}`,className:M,style:O,labelStyle:Object.assign(Object.assign({},m),C),contentStyle:Object.assign(Object.assign({},u),f),span:x,colon:a,component:r,itemPrefixCls:w,bordered:c,label:y?A:null,content:d?S:null}):[s.createElement(k,{key:`label-${$||g}`,className:M,style:Object.assign(Object.assign(Object.assign({},m),O),C),span:1,colon:a,component:r[0],itemPrefixCls:w,bordered:c,label:A}),s.createElement(k,{key:`content-${$||g}`,className:M,style:Object.assign(Object.assign(Object.assign({},u),O),f),span:x*2-1,component:r[1],itemPrefixCls:w,bordered:c,content:S})]})}const nt=e=>{const l=s.useContext(te),{prefixCls:o,vertical:a,row:n,index:c,bordered:r}=e;return a?s.createElement(s.Fragment,null,s.createElement("tr",{key:`label-${c}`,className:`${o}-row`},_(n,e,Object.assign({component:"th",type:"label",showLabel:!0},l))),s.createElement("tr",{key:`content-${c}`,className:`${o}-row`},_(n,e,Object.assign({component:"td",type:"content",showContent:!0},l)))):s.createElement("tr",{key:c,className:`${o}-row`},_(n,e,Object.assign({component:r?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},l)))},ot=nt,st=e=>{const{componentCls:l,labelBg:o}=e;return{[`&${l}-bordered`]:{[`> ${l}-view`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"},[`${l}-row`]:{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBottom:"none"},[`> ${l}-item-label, > ${l}-item-content`]:{padding:`${e.padding}px ${e.paddingLG}px`,borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${l}-item-label`]:{color:e.colorTextSecondary,backgroundColor:o,"&::after":{display:"none"}}}},[`&${l}-middle`]:{[`${l}-row`]:{[`> ${l}-item-label, > ${l}-item-content`]:{padding:`${e.paddingSM}px ${e.paddingLG}px`}}},[`&${l}-small`]:{[`${l}-row`]:{[`> ${l}-item-label, > ${l}-item-content`]:{padding:`${e.paddingXS}px ${e.padding}px`}}}}}},rt=e=>{const{componentCls:l,extraColor:o,itemPaddingBottom:a,colonMarginRight:n,colonMarginLeft:c,titleMarginBottom:r}=e;return{[l]:Object.assign(Object.assign(Object.assign({},ce(e)),st(e)),{"&-rtl":{direction:"rtl"},[`${l}-header`]:{display:"flex",alignItems:"center",marginBottom:r},[`${l}-title`]:Object.assign(Object.assign({},me),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${l}-extra`]:{marginInlineStart:"auto",color:o,fontSize:e.fontSize},[`${l}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${l}-row`]:{"> th, > td":{paddingBottom:a},"&:last-child":{borderBottom:"none"}},[`${l}-item-label`]:{color:e.colorTextTertiary,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${c}px ${n}px`},[`&${l}-item-no-colon::after`]:{content:'""'}},[`${l}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${l}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${l}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${l}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${l}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${l}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${l}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},it=re("Descriptions",e=>{const l=ie(e,{});return[rt(l)]},e=>({labelBg:e.colorFillAlter,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText}));var ct=globalThis&&globalThis.__rest||function(e,l){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)l.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]]);return o};const le=e=>{const{prefixCls:l,title:o,extra:a,column:n,colon:c=!0,bordered:r,layout:p,children:y,className:d,rootClassName:m,style:u,size:b,labelStyle:g,contentStyle:A,items:S}=e,w=ct(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","items"]),{getPrefixCls:M,direction:O,descriptions:C}=s.useContext(de),f=M("descriptions",l),x=ue(),$=s.useMemo(()=>{var L;return typeof n=="number"?n:(L=X(x,Object.assign(Object.assign({},qe),n)))!==null&&L!==void 0?L:3},[x,n]),D=Ye(x,S,y),i=pe(b),R=et($,D),[ae,ne]=it(f),oe=s.useMemo(()=>({labelStyle:g,contentStyle:A}),[g,A]);return ae(s.createElement(te.Provider,{value:oe},s.createElement("div",Object.assign({className:j(f,C==null?void 0:C.className,{[`${f}-${i}`]:i&&i!=="default",[`${f}-bordered`]:!!r,[`${f}-rtl`]:O==="rtl"},d,m,ne),style:Object.assign(Object.assign({},C==null?void 0:C.style),u)},w),(o||a)&&s.createElement("div",{className:`${f}-header`},o&&s.createElement("div",{className:`${f}-title`},o),a&&s.createElement("div",{className:`${f}-extra`},a)),s.createElement("div",{className:`${f}-view`},s.createElement("table",null,s.createElement("tbody",null,R.map((L,Q)=>s.createElement(ot,{key:Q,index:Q,colon:c,prefixCls:f,vertical:p==="vertical",bordered:r,row:L}))))))))};le.Item=lt;const mt=le;var dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"};const ut=dt;var pt=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:ut}))};const gt=s.forwardRef(pt);var ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};const bt=ft;var ht=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:bt}))};const yt=s.forwardRef(ht);var Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-80.8 108.9L531.7 514.4c-7.8 6.1-18.7 6.1-26.5 0L189.6 268.9A7.2 7.2 0 01194 256h648.8a7.2 7.2 0 014.4 12.9z"}}]},name:"mail",theme:"filled"};const Ct=Et;var vt=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:Ct}))};const xt=s.forwardRef(vt);var St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.3 338.4a447.57 447.57 0 00-96.1-143.3 443.09 443.09 0 00-143-96.3A443.91 443.91 0 00512 64h-2c-60.5.3-119 12.3-174.1 35.9a444.08 444.08 0 00-141.7 96.5 445 445 0 00-95 142.8A449.89 449.89 0 0065 514.1c.3 69.4 16.9 138.3 47.9 199.9v152c0 25.4 20.6 46 45.9 46h151.8a447.72 447.72 0 00199.5 48h2.1c59.8 0 117.7-11.6 172.3-34.3A443.2 443.2 0 00827 830.5c41.2-40.9 73.6-88.7 96.3-142 23.5-55.2 35.5-113.9 35.8-174.5.2-60.9-11.6-120-34.8-175.6zM312.4 560c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.4 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48zm199.6 0c-26.4 0-47.9-21.5-47.9-48s21.5-48 47.9-48 47.9 21.5 47.9 48-21.5 48-47.9 48z"}}]},name:"message",theme:"filled"};const $t=St;var wt=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:$t}))};const Mt=s.forwardRef(wt);var Ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.6 230.2L779.1 123.8a80.83 80.83 0 00-57.3-23.8c-21.7 0-42.1 8.5-57.4 23.8L549.8 238.4a80.83 80.83 0 00-23.8 57.3c0 21.7 8.5 42.1 23.8 57.4l83.8 83.8A393.82 393.82 0 01553.1 553 395.34 395.34 0 01437 633.8L353.2 550a80.83 80.83 0 00-57.3-23.8c-21.7 0-42.1 8.5-57.4 23.8L123.8 664.5a80.89 80.89 0 00-23.8 57.4c0 21.7 8.5 42.1 23.8 57.4l106.3 106.3c24.4 24.5 58.1 38.4 92.7 38.4 7.3 0 14.3-.6 21.2-1.8 134.8-22.2 268.5-93.9 376.4-201.7C828.2 612.8 899.8 479.2 922.3 344c6.8-41.3-6.9-83.8-36.7-113.8z"}}]},name:"phone",theme:"filled"};const Nt=Ot;var Tt=function(l,o){return s.createElement(P,B({},l,{ref:o,icon:Nt}))};const Ft=s.forwardRef(Tt),zt=()=>{const[e,l]=t.useState(!1),o=()=>{l(!0)},a=()=>{l(!1)},n=t.createElement(Y,{content:"Change Avatar",placement:"bottom"},t.createElement(ge,{size:50,style:{backgroundColor:"#00AC7C",verticalAlign:"middle"}},e?t.createElement(yt,{style:{cursor:"pointer"}}):"K"));return t.createElement("div",{onMouseEnter:o,onMouseLeave:a},n)},I=({handleClick:e,icon:l,isDisabled:o=!1,tooltip:a=""})=>{const{isRoleStats:n}=Z();return t.createElement(fe,{title:a,placement:"bottom"},t.createElement(z,{shape:"circle",style:{backgroundColor:"#172b4d",alignItems:"center",display:"flex",justifyContent:"center"},onClick:()=>e(),disabled:o||n},l))},At=({isModalOpen:e,closeModal:l,handleSubmit:o,contact:a})=>{var m;const[n]=v.useForm(),{user:c,isLoading:r}=be(),p=F(ee,{onSuccess:()=>{d(),h.invalidateQueries("getContact")}}),y=async u=>{console.log(u),await p.mutate({...u,id:a.id})},d=()=>{l(),n.resetFields()};return s.useEffect(()=>{a.defaultMobileNumber?n.setFieldValue("defaultMobileNumber",a.defaultMobileNumber):n.resetFields()},[a]),t.createElement(he,{className:"modal-activity",open:e,onCancel:l,footer:null,title:null,closable:!1},t.createElement("div",{className:"modal-header"},t.createElement(T.Title,{level:5,style:{color:"white"}},"Set default mobile number for contacting this contact"),t.createElement(z,{onClick:l,style:{backgroundColor:"rgba(0, 0, 0, 0.5)",border:"0px"},icon:t.createElement(ye,{style:{color:"white"}})})),t.createElement(E,{direction:"vertical",style:{padding:"20px",width:"100%",paddingTop:"30px"},size:0},t.createElement(v,{name:"basic",layout:"vertical",labelWrap:!0,onFinish:y,autoComplete:"off",form:n,initialValues:{columnLayout:"one"}},t.createElement(v.Item,{name:"defaultMobileNumber",label:"Mobile number",rules:[{required:!0,message:V}]},t.createElement(W,{style:{width:"100%"}},(m=c==null?void 0:c.numbers)==null?void 0:m.map(u=>t.createElement(W.Option,{value:u.mobileNumber,key:u.id},u.mobileNumber)))),t.createElement(E,{style:{paddingTop:"5px"}},t.createElement(z,{type:"primary",htmlType:"submit",loading:p.isLoading},"Save"),t.createElement(z,{onClick:d},"No")))))},It=({contact:e})=>{var b;const[l,o]=t.useState(!1),[a,n]=t.useState(!1),[c,r]=t.useState(!1),{setIsModalOpen:p,setCallerNumber:y,setDestinationNumber:d}=Ee(),m=F(Ce,{onSuccess:()=>{console.log("success"),h.invalidateQueries("getContact")}}),u=async g=>{console.log("deal",g.star),await m.mutate({id:g.id})};return t.createElement(E,{style:{display:"flex",justifyContent:"space-between",borderTop:"2px solid #e8e8e8",borderBottom:"2px solid #e8e8e8",padding:"8px"}},t.createElement(I,{handleClick:()=>{var g;console.log("contact deal star",(g=e.deal)==null?void 0:g.star)},icon:t.createElement(Be,{style:{color:((b=e==null?void 0:e.deal)==null?void 0:b.star)==1?"yellow":"white",fontSize:"10px"},onClick:()=>{u(e.deal)}}),tooltip:"Add to Favorites"}),t.createElement(I,{handleClick:()=>{y((e==null?void 0:e.defaultMobileNumber)??""),d((e==null?void 0:e.fields.mobile)??""),p(!0)},icon:t.createElement(Ft,{style:{color:"white",fontSize:"10px"}}),tooltip:"Click to call"}),t.createElement(I,{handleClick:()=>{o(!0)},icon:t.createElement(Mt,{style:{color:"white",fontSize:"10px"}}),tooltip:"Click to text"}),t.createElement(I,{handleClick:()=>{console.log("phone")},icon:t.createElement(xt,{style:{color:"white",fontSize:"10px"}}),tooltip:"No email address found",isDisabled:!0}),t.createElement(I,{handleClick:()=>{n(!0)},icon:t.createElement(ve,{style:{color:"white",fontSize:"10px"}}),tooltip:"Click to add deal"}),t.createElement(I,{handleClick:()=>{r(!0)},icon:t.createElement(gt,{style:{color:"white",fontSize:"10px"}}),tooltip:"Click to set the default mobile number for contacting this contact. This number will be automatically selected when initiating communication."}),l&&t.createElement(xe,{closeModal:()=>o(!1),isModalOpen:l,phoneNumbers:e.phoneNumbers,contact:e}),c&&t.createElement(At,{isModalOpen:c,closeModal:()=>r(!1),contact:e}),a&&t.createElement(Se,{isModalOpen:a,handleSubmit:()=>{n(!1),h.invalidateQueries("getContact")},closeModal:()=>n(!1),contactId:e.id}))},_t=({contact:e})=>{var x,$,D;const l=$e(),[o,a]=t.useState(!1),[n,c]=t.useState(!1),[r]=v.useForm(),{contactTypes:p,isLoading:y}=we(),d=(x=e.fields)!=null&&x.contactTypelookupIds?JSON.parse(e.fields.contactTypelookupIds)[0]:"0",[m,u]=t.useState(""),{isRoleStats:b}=Z(),{data:g,refetch:A}=Me("contact"),S=g==null?void 0:g.flatMap(i=>i.fields),w=F(Le,{onSuccess:()=>{h.invalidateQueries("getContact")},onError:i=>{console.log(i.message||"An error occurred")}}),M=F(He,{onSuccess:()=>{h.invalidateQueries("contacts"),h.invalidateQueries("filteredContacts"),l("/contacts")}}),O=F(Re,{onSuccess:i=>{je.success("Cloned successfully"),window.location.replace("/contacts/"+i.data.id)}}),C=[{label:t.createElement("div",{onClick:()=>{c(!0)}},"Edit"),key:"0"},{label:t.createElement(q,{title:"Clone Contact",description:"Are you sure to clone this contact?",onConfirm:()=>{O.mutate({contactId:e.id})}},t.createElement("div",null,"Clone")),key:"1"},{label:t.createElement(q,{title:"Delete Contact",description:"Are you sure to delete this contact?",onConfirm:()=>{M.mutate({contactId:[e.id]})}},t.createElement("div",null,"Delete")),key:"4"}];F(ee,{onSuccess:()=>{r.resetFields(),h.invalidateQueries("getContact"),h.invalidateQueries("thread")}});const f=async i=>{if(i.key!="new"){const R={contactType:[i.key]};w.mutate({fields:R,customableId:e.id,customableType:"contact"})}};return t.createElement(Oe,{style:{width:"100%"}},t.createElement(E,{direction:"vertical",style:{width:"100%",overflow:"hidden",textOverflow:"ellipsis"},size:"large"},t.createElement(Ne,null,t.createElement(U,{span:12},t.createElement(Te,{overlay:t.createElement(N,{onClick:f,selectedKeys:[d]},t.createElement(N.Item,{key:"search"},t.createElement(J,{placeholder:"Search",onKeyUp:i=>u(i.target.value),onClick:i=>i.stopPropagation()})),t.createElement(N.Item,{key:"disabled",disabled:!0},t.createElement(T.Text,{strong:!0},"SELECT CONTACT TYPE")),t.createElement(N.Item,{key:0,disabled:b},t.createElement(G,null,"No Type")),($=p==null?void 0:p.filter(i=>i.name.includes(m)))==null?void 0:$.map(i=>t.createElement(N.Item,{key:i.id,disabled:b},t.createElement(G,{color:i.highlight},i.name))),t.createElement(N.Divider,null),t.createElement(N.Item,{key:"new",disabled:b},t.createElement("a",{onClick:i=>{i.preventDefault(),a(!0)}},"Create New Type"))),trigger:["click"]},t.createElement(Y,{content:t.createElement(Lt,{onClose:()=>a(!1)}),title:t.createElement(E,null,t.createElement(Fe,{onClick:()=>a(!1)}),t.createElement(T.Text,null,"CREATE NEW TYPE")),visible:o,placement:"rightTop"},t.createElement("div",{style:{cursor:"pointer"}},t.createElement(_e,{fields:e.fields}))))),t.createElement(U,{span:12,style:{float:"right"}},t.createElement(De,{menuList:C,label:"Actions",floatRight:!0,disabled:b}))),t.createElement(E,null,t.createElement(We,{count:1,offset:[-8,8],showZero:!0},t.createElement(zt,null)),t.createElement(ze,{to:"/contacts/"+e.id+"/"+e.fields.firstName.replace(/\s/g,"-")+"-"+e.fields.lastName.replace(/\s/g,"-")},t.createElement(T.Title,{level:5},e.fields.firstName+" "+e.fields.lastName))),(D=e.duplicatePhoneNumbers)!=null&&D.length?t.createElement(Ae,{message:t.createElement(t.Fragment,null,t.createElement(T.Text,null,"Duplicate phone number/s with the following contact:"),t.createElement("ul",null,e.duplicatePhoneNumbers.map(i=>t.createElement("li",null,i)))),type:"warning"}):null,t.createElement(It,{contact:e}),t.createElement(E,{style:{width:"100%",justifyContent:"space-between"}},t.createElement(T.Text,{strong:!0},"Contact Details")),t.createElement(mt,{column:1,size:"small"},S==null?void 0:S.filter(i=>(i==null?void 0:i.fieldName)!=="firstName"&&(i==null?void 0:i.fieldName)!=="lastName").map(i=>t.createElement("div",{key:i==null?void 0:i.fieldName,style:{borderBottom:"1px solid #F0F0F0",paddingBottom:0}},t.createElement("div",{style:{minWidth:"100px",textAlign:"left"}},t.createElement(Qe,null,`${i==null?void 0:i.label}: `)),t.createElement(Ve,{record:e.fields,field:i,handleSubmit:()=>{h.invalidateQueries("getContact"),h.invalidateQueries("thread")}}))))),n&&t.createElement(Ie,{isModalOpen:n,closeModal:()=>{c(!1)},handleSubmit:()=>{h.invalidateQueries("contacts"),h.invalidateQueries("filteredContacts"),h.invalidateQueries("getContact")},type:"contact",record:e.fields}))},Lt=({onClose:e})=>{const[l]=v.useForm(),o=v.useWatch("highlight",l),a=F(ke,{onSuccess:()=>{h.invalidateQueries("contactTypesAll"),l.resetFields(),e()}}),n=({color:r})=>t.createElement(z,{style:{backgroundColor:r},shape:"circle",size:"small",onClick:()=>{console.log(r),l.setFieldsValue({highlight:r})}},o==r&&t.createElement(Pe,{style:{color:"white"}})),c=r=>{console.log(r),a.mutate(r)};return t.createElement(E,{direction:"vertical"},t.createElement(v,{form:l,layout:"vertical",onFinish:c},t.createElement(v.Item,{label:"Name",name:"name",required:!0,rules:[{required:!0,message:V}]},t.createElement(J,null)),t.createElement(v.Item,{label:"Highlights",name:"highlight",required:!0,rules:[{required:!0,message:V}]},t.createElement(E,{direction:"vertical"},t.createElement(T.Text,{style:{fontSize:"11px"}},"Color code your contact type"),t.createElement(E,null,t.createElement(n,{color:"magenta"}),t.createElement(n,{color:"red"}),t.createElement(n,{color:"yellow"}),t.createElement(n,{color:"orange"}),t.createElement(n,{color:"gold"}),t.createElement(n,{color:"gray"})),t.createElement(E,null,t.createElement(n,{color:"lime"}),t.createElement(n,{color:"green"}),t.createElement(n,{color:"cyan"}),t.createElement(n,{color:"blue"}),t.createElement(n,{color:"violet"}),t.createElement(n,{color:"purple"})))),t.createElement(v.Item,null,t.createElement(E,{style:{float:"right"}},t.createElement(z,{type:"primary",htmlType:"submit",loading:a.isLoading},"Create"),t.createElement(z,{htmlType:"reset",onClick:()=>e()},"Cancel")))))};export{_t as C,mt as D};
